---
// src/components/MainMenuPro.astro
/**
 * MainMenuPro.astro (version PRO / B2B)
 * Objectif : ne PAS mélanger B2B/B2C.
 * - "Avis" => "Témoignages"
 * - "Travaux" => "Réalisations"
 * - Suppression : "Espace artisans", numéro de tel, "Diagnostic gratuit" (déjà dans le header)
 * Ton : "vous"
 */

const path = Astro.url.pathname || "/";

const isActive = (href) => {
  if (href === "/pro/") return path === "/pro/" || path === "/pro";
  return path === href || path.startsWith(href);
};

const offres = [
  { href: "/pro/seo-local/", label: "SEO local" },
  { href: "/pro/google-ads/", label: "Google Ads" },
  { href: "/pro/cro/", label: "CRO" },
];

// Liens preuve (B2B)
const preuves = [
  { href: "/pro/temoignages/", label: "Témoignages" },  // à créer (recommandé)
  { href: "/pro/realisations/", label: "Réalisations" }, // à créer (recommandé)
];

// Option : fallback si vous n'avez pas encore ces pages
const fallbackTemoignages = "/avis/";
const fallbackRealisations = "/travaux/";
---

<ul class="menu-container">

  <li class={`menu-item ${isActive("/pro/") ? "current" : ""}`}>
    <a class="menu-link" href="/pro/"><div>Pro</div></a>
  </li>

  <!-- Offres (mega menu) -->
  <li class={`menu-item mega-menu mega-menu-full ${path.startsWith("/pro/") && !isActive("/pro/") ? "current" : ""}`}>
    <a class="menu-link" href="/pro/"><div>Offres</div></a>

    <div class="mega-menu-content">
      <div class="container">
        <div class="row g-4 py-4 align-items-stretch">

          <div class="col-lg-6">
            <div class="small text-uppercase ls-1 text-muted mb-2">Nos offres</div>

            <ul class="sub-menu-container mega-menu-column">
              {offres.map((it) => (
                <li class={`menu-item ${isActive(it.href) ? "current" : ""}`}>
                  <a class="menu-link" href={it.href}>
                    <div class="d-flex justify-content-between align-items-center w-100">
                      <span>{it.label}</span>
                      <span class="small text-muted">→</span>
                    </div>
                  </a>
                </li>
              ))}
            </ul>

            <div class="small text-muted mt-3">
              Vous hésitez ? Commencez par <a href="/pro/">la page Pro</a> (méthode + options de suivi).
            </div>
          </div>

          <div class="col-lg-6">
            <div class="widget p-4 rounded-3 bg-light h-100">
              <h5 class="mb-2">Objectif : plus de demandes qualifiées</h5>
              <p class="mb-3 small">
                SEO local, Google Ads et optimisation conversion : une méthode simple, du tracking, et des actions mesurables
                pour TPE/PME, indépendants, commerces et artisans.
              </p>

              <div class="d-flex flex-wrap gap-2">
                <a href="/pro/#diagnostic" class="btn btn-outline-primary btn-sm">Demander un diagnostic</a>
                <a href="/pro/#offres" class="btn btn-outline-secondary btn-sm">Voir les offres</a>
              </div>

              <hr class="my-3" />

              <div class="small text-muted mb-0">
                Zone : Sud Oise (60) & Nord 95 — interventions à distance possibles selon votre activité.
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </li>

  <!-- Preuves (B2B) -->
  <li class={`menu-item ${isActive("/pro/temoignages/") || isActive(fallbackTemoignages) ? "current" : ""}`}>
    <a class="menu-link" href={preuves[0].href}><div>Témoignages</div></a>
  </li>

  <li class={`menu-item ${isActive("/pro/realisations/") || isActive(fallbackRealisations) ? "current" : ""}`}>
    <a class="menu-link" href={preuves[1].href}><div>Réalisations</div></a>
  </li>

  <!-- Contact PRO -->
  <li class={`menu-item ${isActive("/pro/contact/") ? "current" : ""}`}>
    <a class="menu-link" href="/pro/contact/"><div>Contact</div></a>
  </li>

</ul>

<!-- Mobile : liens courts (sans tel / sans diagnostic) -->
<ul class="menu-container mobile-primary-menu">
  <li class="menu-item">
    <a class="menu-link" href="/pro/"><div>Offres</div></a>
  </li>
  <li class="menu-item">
    <a class="menu-link" href="/pro/contact/"><div>Contact</div></a>
  </li>
</ul>
