---
// src/components/Breadcrumbs.astro

import type { Breadcrumb } from "../lib/routing";
import { getBreadcrumbs } from "../lib/routing";

type Props = {
  type: "service" | "serviceVille" | "zone" | "zoneVille" | "article" | "static";
  service?: string;
  zone?: string;
  ville?: string;
  article?: string;
  staticLabel?: string;
  staticUrl?: string;
  className?: string;
};

const {
  type,
  service,
  zone,
  ville,
  article,
  staticLabel,
  staticUrl,
  className = ""
} = Astro.props as Props;

const crumbs: Breadcrumb[] = getBreadcrumbs({
  type,
  service,
  zone,
  ville,
  article,
  staticLabel,
  staticUrl
});
---

<nav class={`hc-breadcrumbs ${className}`} aria-label="Fil dâ€™Ariane">
  <ol>
    {crumbs.map((c, idx) => (
      <li>
        {idx < crumbs.length - 1 ? (
          <a href={c.href}>{c.label}</a>
        ) : (
          <span aria-current="page">{c.label}</span>
        )}
      </li>
    ))}
  </ol>
</nav>