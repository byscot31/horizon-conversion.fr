---
// src/components/Testimonials.astro

const {
  ASSET_BASE = "/_assets_",
  badge = "Avis",
  title = "Ce que disent les clients",
  subtitle = "Remplace par de vrais avis (Google / LinkedIn). Même 3 avis = énorme.",
  items = [
    {
      img: `${ASSET_BASE}/images/testimonials/1.jpg`,
      alt: "Client (Artisan)",
      text: "On a enfin un plan clair. La visibilité locale a décollé et les appels sont mieux qualifiés.",
      name: "Client (Artisan)",
      company: "Sud Oise",
    },
    {
      img: `${ASSET_BASE}/images/testimonials/2.jpg`,
      alt: "Client (PME)",
      text: "Google Ads est devenu pilotable : moins de clics inutiles, plus de demandes rentables.",
      name: "Client (PME)",
      company: "Nord 95",
    },
    {
      img: `${ASSET_BASE}/images/testimonials/3.jpg`,
      alt: "Client (Cabinet)",
      text: "Le site convertit mieux, surtout sur mobile. Le formulaire et les pages services ont été optimisés.",
      name: "Client (Cabinet)",
      company: "Oise",
    },
  ],
} = Astro.props;

const bgImage = `${ASSET_BASE}/images/sections/3.jpg`;
---

<div
  class="section mt-0"
  style={`background: url('${bgImage}') no-repeat top center; background-size: cover; padding: 0 0 70px;`}
>
  <div class="container">
    <div class="heading-block border-bottom-0 text-center">
      <div class="badge rounded-pill badge-default">{badge}</div>
      <h2 class="h3 text-transform-none ls-0">{title}</h2>
      <p class="mb-0 text-muted">{subtitle}</p>
    </div>

    <div
      id="oc-testi"
      class="owl-carousel testimonials-carousel carousel-widget"
      data-margin="0"
      data-pagi="true"
      data-loop="true"
      data-center="true"
      data-autoplay="5000"
      data-items-sm="1"
      data-items-md="2"
      data-items-xl="3"
    >
      {items.map((t) => (
        <div class="oc-item">
          <div class="card rounded-6 shadow border-0">
            <img
              class="testimonial-image rounded-circle p-2 bg-white"
              src={t.img}
              alt={t.alt ?? "Avis client"}
              loading="lazy"
              decoding="async"
            />
            <div class="card-body p-4 pt-2 position-relative overflow-hidden">
              <div class="row">
                <div class="col-12 text-center">
                  <p class="mb-4 font-primary fst-normal">{t.text}</p>
                  <h4 class="h6 mb-0 fw-bold">{t.name}</h4>
                  <small class="text-muted">{t.company}</small>
                </div>
              </div>
              <div class="bg-icon bi-quote op-02"></div>
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</div>