// src/components/JsonLdBreadcrumbs.astro
import site from "../data/site.json";

// Props: profile.seo.breadcrumbs = [{label, href}, ...]
const { profile } = Astro.props;

const baseUrl = site?.url || "";
const itemListElement = (profile?.seo?.breadcrumbs || []).map((b, idx) => ({
  "@type": "ListItem",
  "position": idx + 1,
  "name": b.label,
  "item": baseUrl ? `${baseUrl}${b.href}` : b.href
}));

const data = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": itemListElement
};
---

<script type="application/ld+json">
{JSON.stringify(data)}
</script>
