---
// src/components/Transparence.astro

import data from "../data/transparence.json";

type Props = {
  title?: string;
  intro?: string;
  limit?: number;
  columns?: 2 | 3;
};

const {
  title = (data as any)?.title || "Transparence",
  intro = (data as any)?.intro || "",
  limit = 6,
  columns = 3
} = Astro.props as Props;

const itemsAll = Array.isArray((data as any)?.items) ? (data as any).items : [];
const items = itemsAll.slice(0, Math.max(1, limit));

const gridCols =
  columns === 2
    ? "repeat(2,minmax(0,1fr))"
    : "repeat(3,minmax(0,1fr))";
---

<section style="padding:1rem 0">
  <div style="max-width:980px;margin:0 auto;padding:0 1rem">
    <h2 style="margin:0 0 .5rem;font-size:1.25rem">{title}</h2>
    {intro ? <p style="margin:0 0 .75rem;color:#6b7280">{intro}</p> : null}

    <div style={`display:grid;grid-template-columns:${gridCols};gap:.75rem`}>
      {items.map((it: any) => (
        <div style="border:1px solid #e5e7eb;border-radius:12px;padding:1rem;background:#fff">
          <strong style="display:block;margin:0 0 .35rem">{it.title}</strong>
          <p style="margin:0;color:#374151">{it.text}</p>
        </div>
      ))}
    </div>
  </div>
</section>