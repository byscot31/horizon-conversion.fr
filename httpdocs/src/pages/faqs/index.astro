---
// src/pages/faqs/index.astro

import Head from "../../components/Head.astro";
import TopBar from "../../components/TopBar.astro";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
import JavaScripts from "../../components/JavaScripts.astro";

const SITE =
  (import.meta as any).env?.PUBLIC_SITE_URL ||
  (Astro.site ? String(Astro.site) : "");

const ASSET_BASE =
  (((import.meta as any).env?.PUBLIC_ASSET_BASE as string) || "/_assets_").replace(/\/$/, "");

const canonical = SITE
  ? new URL(Astro.url.pathname, SITE).toString()
  : Astro.url.toString();

const seo = {
  title: "FAQ – Horizon Conversion | SEO local, Google Ads, CRO, Tracking (Sud Oise / Nord 95)",
  description:
    "Réponses aux questions fréquentes : tarifs, délais, zone d’intervention (Oise 60 / Nord 95), SEO local, Google Ads, CRO, tracking GA4/GTM, reporting & accompagnement.",
};

const contact = {
  phoneDisplay: "06 60 92 10 08",
  phoneHref: "+33660921008",
  email: "contact@horizon-conversion.fr",
  linkedin: "#",
  instagram: "#",
};

// Filtres (mêmes principes que Canvas)
const filters = [
  { label: "Tout", key: "all", active: true },
  { label: "SEO local", key: "faq-seo" },
  { label: "Google Ads", key: "faq-ads" },
  { label: "CRO / UX", key: "faq-cro" },
  { label: "Tracking / Analytics", key: "faq-analytics" },
  { label: "Tarifs", key: "faq-pricing" },
  { label: "Process", key: "faq-process" },
];

// Questions / réponses (tu peux en ajouter facilement)
const faqs = [
  // SEO LOCAL
  {
    cats: ["faq-seo", "faq-process"],
    iconClosed: "bi-question-circle",
    title: "En combien de temps le SEO local apporte des leads ?",
    content:
      "En général : premiers signaux en 4–8 semaines (pages indexées, GBP, positions), puis accélération entre 3 et 6 mois. La vitesse dépend du secteur, de la concurrence locale, et de l’état du site (contenu + technique).",
  },
  {
    cats: ["faq-seo"],
    iconClosed: "bi-geo-alt",
    title: "Vous ciblez quelles zones ?",
    content:
      "Sud Oise (60) et Nord Val-d’Oise (95) : Senlis, Chantilly, Creil, Compiègne, Luzarches, Gouvieux, Lamorlaye, Beaumont-sur-Oise, L’Isle-Adam… et alentours.",
  },
  {
    cats: ["faq-seo", "faq-process"],
    iconClosed: "bi-check-lg",
    title: "Qu’est-ce que vous faites concrètement en SEO local ?",
    content:
      "Pages services + pages locales, optimisation Google Business Profile (catégories, services, posts, FAQ), stratégie d’avis, maillage interne, schémas (FAQ/LocalBusiness), optimisation vitesse, et suivi mensuel positions + leads.",
  },

  // GOOGLE ADS
  {
    cats: ["faq-ads", "faq-pricing"],
    iconClosed: "bi-cash",
    title: "Quel budget Ads faut-il prévoir pour des leads rapides ?",
    content:
      "Souvent 300–1 500€/mois selon métier/zone. On démarre petit si besoin, mais l’essentiel est d’avoir un tracking propre (conversions) pour piloter le CPL/CPA et couper ce qui ne marche pas.",
  },
  {
    cats: ["faq-ads", "faq-process"],
    iconClosed: "bi-bar-chart",
    title: "Comment vous optimisez une campagne Google Ads ?",
    content:
      "Structure par intentions (service/urgence/devis), mots-clés + exclusions, annonces orientées bénéfices, landing pages dédiées, suivi conversions (form, call, WhatsApp), et optimisation hebdo selon CPL/qualité des leads.",
  },

  // CRO / UX
  {
    cats: ["faq-cro", "faq-process"],
    iconClosed: "uil uil-comments-alt",
    title: "C’est quoi un audit CRO et à quoi ça sert ?",
    content:
      "C’est un audit orienté conversion : message, preuves, CTA, formulaire, friction, vitesse, mobile, parcours. L’objectif : plus de demandes à trafic constant (donc plus rentable que “juste faire venir plus”).",
  },
  {
    cats: ["faq-cro"],
    iconClosed: "bi-file-earmark-richtext",
    title: "Vous faites des A/B tests ?",
    content:
      "Oui quand le volume le permet. Sinon : itérations rapides (copy/CTA/form) + mesure via événements GA4 pour valider l’impact avant d’investir plus.",
  },

  // TRACKING / ANALYTICS
  {
    cats: ["faq-analytics", "faq-process"],
    iconClosed: "fa-solid fa-lock",
    title: "Est-ce que GA4 suffit ou il faut aussi Google Tag Manager ?",
    content:
      "GA4 seul est vite limité. GTM permet de suivre proprement : clic téléphone, WhatsApp, formulaires, scroll, RDV, téléchargements, etc., sans toucher au code à chaque fois.",
  },
  {
    cats: ["faq-analytics"],
    iconClosed: "bi-download",
    title: "Vous mesurez les appels téléphoniques ?",
    content:
      "Oui : clic-to-call sur mobile, tracking des numéros, et si besoin call tracking (numéro dédié) pour attribuer les appels aux campagnes/pages.",
  },

  // TARIFS
  {
    cats: ["faq-pricing"],
    iconClosed: "bi-credit-card",
    title: "Comment sont calculés vos tarifs ?",
    content:
      "Selon périmètre (SEO/Ads/CRO/Tracking), nombre de pages/localités, niveau de concurrence et besoins de reporting. Je propose généralement : setup initial + abonnement mensuel (pilotage & optimisation).",
  },
  {
    cats: ["faq-pricing", "faq-process"],
    iconClosed: "bi-file-earmark",
    title: "Y a-t-il un engagement ?",
    content:
      "Ça dépend du pack. Pour le SEO : un minimum de 3 mois est cohérent. Pour Ads/Tracking/CRO : plus flexible. L’idée : laisser le temps d’implémenter, mesurer, et optimiser.",
  },
];

// JSON-LD FAQPage pour SEO
const faqJsonLd = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  mainEntity: faqs.map((f) => ({
    "@type": "Question",
    name: f.title,
    acceptedAnswer: {
      "@type": "Answer",
      text: f.content,
    },
  })),
};

const pageTitle = {
  badge: "Toutes vos questions au même endroit",
  h1: "Foire aux questions",
  breadcrumb: [
    { label: "Accueil", href: "/" },
    { label: "FAQ", href: "/faqs/" },
  ],
};

const intro = {
  badge: "Besoin d’aide ?",
  title: "Questions fréquentes",
  text:
    "Retrouvez ici les réponses sur les délais, la méthode, le tracking et les tarifs. Si vous ne trouvez pas votre question : contactez-moi et je vous réponds rapidement.",
};

const formSection = {
  bg: `${ASSET_BASE}/images/sections/1.jpg`,
  badge: "Audit",
  title: "Recevez un mini-audit gratuit",
  text:
    "Je vous envoie un retour clair sur votre acquisition (SEO/Ads) + conversion (CRO) + tracking (GA4/GTM) et 3 actions prioritaires.",
  cardTitle: "Demander le mini-audit",
  fields: { nameLabel: "Nom *", emailLabel: "Email *", websiteLabel: "Site Web *" },
  submitLabel: "Envoyer",
  videoUrl: "https://www.youtube.com/watch?v=P3Huse9K6Xs",
};
---

<!doctype html>
<html dir="ltr" lang="fr-FR">
  <Head {seo} {canonical} jsonLd={faqJsonLd} />
  <body class="stretched">
    <div id="wrapper">
      <TopBar {contact} ASSET_BASE={ASSET_BASE} />
      <Header {contact} ASSET_BASE={ASSET_BASE} />

      <!-- Page Title -->
      <section class="page-title page-title-parallax parallax scroll-detect page-title-center dark include-header include-topbar">
        <img src={`${ASSET_BASE}/images/faqs-title.jpg`} class="parallax-bg" alt="FAQ" />
        <div id="particles-line"></div>

        <div class="container">
          <div class="page-title-row">
            <div class="page-title-content">
              <div class="badge rounded-pill border border-light text-light">{pageTitle.badge}</div>
              <h1>{pageTitle.h1}</h1>
            </div>

            <nav aria-label="breadcrumb">
              <ol class="breadcrumb">
                {pageTitle.breadcrumb.map((b, idx) => (
                  <li
                    class={`breadcrumb-item ${idx === pageTitle.breadcrumb.length - 1 ? "active" : ""}`}
                    aria-current={idx === pageTitle.breadcrumb.length - 1 ? "page" : undefined}
                  >
                    {idx === pageTitle.breadcrumb.length - 1 ? b.label : <a href={b.href}>{b.label}</a>}
                  </li>
                ))}
              </ol>
            </nav>
          </div>
        </div>

        <div class="video-overlay z-1" style="background-image: linear-gradient(to top, rgba(254,150,3,0.5), #39384D);"></div>
      </section>

      <!-- Content -->
      <section id="content">
        <div class="content-wrap pb-0">
          <div class="container mb-5">
            <div class="row justify-content-center">
              <div class="col-xl-6 col-lg-8 text-center">
                <div class="heading-block border-bottom-0 text-center mx-auto">
                  <div class="badge rounded-pill badge-default">{intro.badge}</div>
                  <h3 class="text-transform-none ls-0 mb-3">{intro.title}</h3>
                  <p>{intro.text}</p>
                </div>
              </div>

              <div class="clear"></div>

              <div class="col-lg-10">
                <!-- Filters -->
                <div class="grid-filter-wrap justify-content-center">
                  <ul class="grid-filter style-4 customjs">
                    {filters.map((f) => (
                      <li class={f.active ? "activeFilter" : ""}>
                        <a href="#" class="fw-semibold" data-filter={f.key === "all" ? "all" : `.${f.key}`}>
                          {f.label}
                        </a>
                      </li>
                    ))}
                  </ul>
                </div>

                <div class="clear"></div>

                <!-- FAQs -->
                <div id="faqs" class="faqs">
                  {faqs.map((q) => (
                    <div class={`toggle faq pb-3 mb-4 ${q.cats.join(" ")}`}>
                      <div class="toggle-header">
                        <div class="toggle-icon color">
                          <i class={`toggle-closed ${q.iconClosed}`}></i>
                          <i class={`toggle-open ${q.iconClosed}`}></i>
                        </div>

                        <div class="toggle-title fw-semibold ps-1">{q.title}</div>

                        <div class="toggle-icon color">
                          <i class="toggle-closed fa-solid fa-chevron-down text-black-50"></i>
                          <i class="toggle-open fa-solid fa-chevron-up color"></i>
                        </div>
                      </div>

                      <div class="toggle-content text-black-50 ps-4">{q.content}</div>
                    </div>
                  ))}
                </div>
              </div>
            </div>
          </div>

          <div class="clear"></div>

          <!-- Form Section -->
          <div
            class="section mb-3"
            style={{
              background: `url(${formSection.bg}) no-repeat center center`,
              backgroundSize: "cover",
              padding: "100px 0",
            }}
          >
            <div class="container">
              <div class="row justify-content-between align-items-center">
                <div class="col-md-6">
                  <div class="heading-block border-bottom-0 mb-4">
                    <div class="badge rounded-pill badge-default">{formSection.badge}</div>
                    <h3 class="text-transform-none ls-0">{formSection.title}</h3>
                  </div>
                  <p>{formSection.text}</p>
                </div>

                <div class="col-lg-5 col-md-6">
                  <div class="card shadow-sm">
                    <div class="card-body">
                      <h4 class="mb-3">{formSection.cardTitle}</h4>

                      <div class="form-widget">
                        <div class="form-result"></div>
                        <form class="row mb-0" id="template-contactform" name="template-contactform" action="/include/form.php" method="post">
                          <div class="col-12 form-group mb-3">
                            <label for="template-contactform-name">{formSection.fields.nameLabel}</label>
                            <input type="text" id="template-contactform-name" name="template-contactform-name" class="form-control input-sm required" value="" />
                          </div>
                          <div class="col-12 form-group mb-3">
                            <label for="template-contactform-email">{formSection.fields.emailLabel}</label>
                            <input type="email" id="template-contactform-email" name="template-contactform-email" class="form-control input-sm required" value="" />
                          </div>
                          <div class="col-12 form-group mb-4">
                            <label for="template-contactform-website">{formSection.fields.websiteLabel}</label>
                            <input type="text" id="template-contactform-website" name="template-contactform-website" class="form-control input-sm required" value="" />
                          </div>
                          <div class="col-12 form-group mb-0">
                            <button class="button button-rounded w-100 text-transform-none ls-0 m-0" type="submit" id="template-contactform-submit" name="template-contactform-submit" value="submit">
                              {formSection.submitLabel}
                            </button>
                          </div>

                          <input type="hidden" name="prefix" value="template-contactform-" />
                        </form>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <Footer {contact} ASSET_BASE={ASSET_BASE} />
    </div>

    <div id="gotoTop" class="uil uil-angle-up"></div>

    <JavaScripts ASSET_BASE={ASSET_BASE} />

    <!-- Particles -->
    <script is:inline src={`${ASSET_BASE}/js/particles/particles.min.js`}></script>
    <script is:inline src={`${ASSET_BASE}/js/particles/particles-line.js`}></script>

    <!-- FAQ Filter Script (Canvas-like) -->
    <script is:inline>
      {`
      (function(){
        function onReady(fn){
          if (document.readyState === "loading") document.addEventListener("DOMContentLoaded", fn);
          else fn();
        }

        onReady(function(){
          var faqRoot = document.querySelector("#faqs");
          if (!faqRoot) return;

          var faqItems = Array.prototype.slice.call(faqRoot.querySelectorAll(".faq"));
          var filterLinks = Array.prototype.slice.call(document.querySelectorAll(".grid-filter a[data-filter]"));

          function applyFilter(selector){
            // selector: "all" or ".faq-seo" etc.
            faqItems.forEach(function(item){
              item.style.display = "none";
            });

            if (selector === "all") {
              faqItems.forEach(function(item){ item.style.display = ""; });
              return;
            }

            faqItems.forEach(function(item){
              if (item.matches(selector)) item.style.display = "";
            });
          }

          function setActive(link){
            var lis = Array.prototype.slice.call(document.querySelectorAll(".grid-filter li"));
            lis.forEach(function(li){ li.classList.remove("activeFilter"); });
            if (link && link.parentElement) link.parentElement.classList.add("activeFilter");
          }

          // Init from hash: #faq-seo etc.
          if (window.location.hash) {
            var hash = window.location.hash.replace("#", "");
            var selector = "." + hash;

            var any = faqItems.some(function(item){ return item.classList.contains(hash); });
            if (any) {
              var link = document.querySelector('.grid-filter a[data-filter=".' + hash + '"]');
              setActive(link);
              applyFilter(selector);
            }
          }

          filterLinks.forEach(function(a){
            a.addEventListener("click", function(e){
              e.preventDefault();
              var selector = a.getAttribute("data-filter") || "all";
              setActive(a);
              applyFilter(selector);

              // Update URL hash for shareable filters (optional)
              if (selector === "all") history.replaceState(null, "", window.location.pathname);
              else history.replaceState(null, "", window.location.pathname + "#" + selector.replace(".", ""));
            });
          });
        });
      })();
      `}
    </script>
  </body>
</html>