---
// src/pages/local/[city]/index.astro

import PageLayout from "../../../layouts/PageLayout.astro";
import cities from "../../../data/cities.json";
import services from "../../../data/services.json";
import ctas from "../../../data/ctas.json";
import site from "../../../data/site.json";

const { city } = Astro.params;
const c = cities.volume.find(x => x.slug === city);
if (!c) throw new Error("City volume not found");

export async function getStaticPaths() {
  return cities.volume.map(c => ({ params: { city: c.slug } }));
}
---

<PageLayout
  title={`${c.name} — Packs | ${site.brand}`}
  description={`Packs à ${c.name}. Simple. Rapide. Orienté demandes.`}
>
  <section class="section bg-transparent m-0" style="padding:80px 0;">
    <div class="container">
      <div class="badge rounded-pill badge-default">Pack • {c.name}</div>
      <h1 class="text-transform-none ls-0 mt-3">Packs à {c.name}</h1>
      <p class="lead mb-4">Vous voulez des demandes. On va droit au but.</p>

      <div class="d-flex flex-wrap gap-2 mb-4">
        <a href={ctas.primary.href} class="button button-rounded">{ctas.primary.label}</a>
        <a href={ctas.secondary.href} class="button button-rounded button-light text-dark bg-white border">{ctas.secondary.label}</a>
      </div>

      <div class="row g-4">
        {services.map((s) => (
          <div class="col-md-6 col-lg-4">
            <a href={`/local/${c.slug}/${s.slug}/`} class="text-decoration-none">
              <div class="p-4 rounded-6 bg-white shadow-sm h-100">
                <h3 class="text-transform-none ls-0 mb-2">{s.title}</h3>
                <p class="mb-0 text-contrast-600">{s.benefit}</p>
                <div class="mt-3 small text-contrast-600">Voir le pack →</div>
              </div>
            </a>
          </div>
        ))}
      </div>
    </div>
  </section>
</PageLayout>