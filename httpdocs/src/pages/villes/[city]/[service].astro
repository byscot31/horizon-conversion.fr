---
// src/pages/local/[city]/[service].astro

import PageLayout from "../../../layouts/PageLayout.astro";
import services from "../../../data/services.json";
import cities from "../../../data/cities.json";
import ctas from "../../../data/ctas.json";

const { city, service } = Astro.params;

const cityObj = cities.volume.find(c => c.slug === city);
const serviceObj = services.find(s => s.slug === service);
if (!cityObj || !serviceObj) throw new Error("Not found");

const title = `${serviceObj.title} ${cityObj.name} — pack simple`;
---

<PageLayout title={title} description={`Pack ${serviceObj.title} à ${cityObj.name}. Simple. Rapide. Orienté demandes.`}>
  <section class="section bg-transparent m-0" style="padding: 70px 0;">
    <div class="container">
      <div class="badge rounded-pill badge-default">Pack • {cityObj.name}</div>
      <h1 class="text-transform-none ls-0 mt-3">{serviceObj.title} — {cityObj.name}</h1>
      <p class="mb-4">{serviceObj.benefit}</p>

      <div class="d-flex flex-wrap gap-2 mb-4">
        <a class="button button-rounded" href={ctas.primary.href}>{ctas.primary.label}</a>
        <a class="button button-rounded button-light text-dark bg-white border" href={ctas.secondary.href}>{ctas.secondary.label}</a>
      </div>

      <div class="row g-4">
        <div class="col-lg-6">
          <h3 class="text-transform-none ls-0">Ce que vous obtenez</h3>
          <ul>
            <li>Mise en place rapide.</li>
            <li>Suivi clair, sans blabla.</li>
            <li>Un point mensuel.</li>
          </ul>
        </div>
        <div class="col-lg-6">
          <h3 class="text-transform-none ls-0">Pour qui</h3>
          <ul>
            <li>Artisans, commerces, indépendants.</li>
            <li>Besoin de demandes rapidement.</li>
            <li>Budget maîtrisé.</li>
          </ul>
        </div>
      </div>
    </div>
  </section>
</PageLayout>

export async function getStaticPaths() {
  return cities.volume.flatMap((c) =>
    services.map((s) => ({ params: { city: c.slug, service: s.slug } }))
  );
}