---
// src/pages/services/[service]/[metier]/[ville].astro
import Layout from "../../../../layouts/Layout.astro";
import services from "../../../../data/services.json";
import metiers from "../../../../data/metiers.json";
import villes from "../../../../data/villes.json";
import intentions from "../../../../data/intentions.json";
import personasParVille from "../../../../data/personas-par-ville.json";
import casClients from "../../../../data/cas-clients.json";
import IntentionAnimation from "../../../../components/IntentionAnimation.astro";

export async function getStaticPaths() {
  const paths = [];
  for (const service of services) {
    for (const metier of metiers) {
      for (const ville of villes) {
        paths.push({
          params: {
            service: service.id,
            metier: metier.id,
            ville: ville.id
          },
          props: { service, metier, ville }
        });
      }
    }
  }
  return paths;
}

const { service, metier, ville } = Astro.props;

// Donn√©es d'intention (transactionnelle pour les pages reines)
const intentionData = intentions[metier.id]?.intentions?.transactionnelle || {
  description: `Vous cherchez un expert en ${service.nomCourt} pour votre activit√© de ${metier.nomCourt} √† ${ville.nom} ?`,
  cta: "Obtenir un audit gratuit",
  urgence: "haute"
};

// R√©cup√©rer le persona sp√©cifique √† cette ville et ce m√©tier
const personaLocal = personasParVille[ville.id]?.[metier.id];

// Fallback sur le persona g√©n√©rique du m√©tier
const personaGenerique = intentions[metier.id]?.persona;

// D√©terminer quel persona afficher
const persona = personaLocal || personaGenerique || {
  nom: "nos clients",
  citation: "Je veux √™tre plus visible dans ma ville.",
  histoire: "Comme beaucoup de professionnels, vous cherchez √† attirer plus de clients locaux."
};

// Filtrer les cas clients pour ce m√©tier
const casPourCeMetier = casClients[metier.id] || [];

// Priorit√© : cas dans la m√™me ville, sinon cas du m√©tier
const casMemeVille = casPourCeMetier.filter(c => c.villeId === ville.id);
const casAAfficher = casMemeVille.length >= 3
  ? casMemeVille.slice(0, 3)
  : [...casMemeVille, ...casPourCeMetier.filter(c => c.villeId !== ville.id)].slice(0, 3);

// Si pas assez de cas, utiliser des cas g√©n√©riques
const temoignagesParDefaut = casClients.default?.[metier.id] || [];

const temoignagesAAfficher = casAAfficher.length >= 3
  ? casAAfficher
  : temoignagesParDefaut.slice(0, 3);

// D√©terminer le texte √† afficher selon la situation
const affichagePersona = {
  // Si on a un persona sp√©cifique √† la ville, on l'utilise
  avecNom: personaLocal ? `Comme ${persona.nom}, ${metier.nomCourt} √† ${ville.nom}...` : null,

  // Sinon, on utilise une formule g√©n√©rique
  sansNom: `Comme d'autres ${metier.nomCourt} √† ${ville.nom}...`,

  // Texte √† utiliser
  texte: personaLocal
    ? `Comme ${persona.nom}, ${metier.nomCourt} √† ${ville.nom}...`
    : `Comme d'autres ${metier.nomCourt} √† ${ville.nom}...`
};

const hasLocalPersona = !!personaLocal;
const hasLocalCase = casMemeVille.length > 0;
const shouldNoIndex = !hasLocalPersona && !hasLocalCase;

// Autres villes pour ce m√™me service+m√©tier
const autresVilles = villes.filter(v => v.id !== ville.id).slice(0, 8);

// Autres services pour ce m√™me m√©tier dans cette ville
const autresServices = services.filter(s => s.id !== service.id).slice(0, 4);

const statsVille = {
  entreprises: Math.floor(ville.population / 10) || 500,
  artisans: Math.floor(ville.population / 50) || 100,
  commerces: Math.floor(ville.population / 100) || 50
};

// Titre et description
const titre = `${service.nom} pour ${metier.nomCourt} √† ${ville.nom}`;
const description = intentionData.description;
---

<Layout title={titre} description={description} noIndex={shouldNoIndex}>
  <!-- Fil d'Ariane -->
  <nav class="container-custom py-4 text-sm text-gray-600">
    <ol class="flex items-center space-x-2">
      <li><a href="/" class="hover:text-primary-600">Accueil</a></li>
      <li class="text-gray-400">‚Ä∫</li>
      <li><a href="/services" class="hover:text-primary-600">Services</a></li>
      <li class="text-gray-400">‚Ä∫</li>
      <li><a href={`/services/${service.id}`} class="hover:text-primary-600">{service.nomCourt}</a></li>
      <li class="text-gray-400">‚Ä∫</li>
      <li><a href={`/services/${service.id}/${metier.id}`} class="hover:text-primary-600">{metier.nomCourt}</a></li>
      <li class="text-gray-400">‚Ä∫</li>
      <li class="text-gray-900 font-medium">{ville.nom}</li>
    </ol>
  </nav>

  <!-- Hero avec intention transactionnelle -->
  <section class="relative bg-gradient-to-r from-primary-600 to-primary-800 text-white overflow-hidden">
    {intentionData.urgence === 'haute' && (
        <div class="absolute top-4 right-4">
          <IntentionAnimation intention="transactionnelle" type="badge">
            ‚ö° INTERVENTION RAPIDE
          </IntentionAnimation>
        </div>
    )}

    <div class="container-custom py-20 relative z-10">
      <div class="max-w-4xl mx-auto text-center">
        <h1 class="text-5xl md:text-6xl font-bold mb-6">{titre}</h1>

        <!-- Accroche persona -->
        <div class="bg-white/10 backdrop-blur-sm p-6 rounded-xl mb-8">
          <div class="flex items-center justify-center gap-4">
            <div class="w-16 h-16 bg-white/20 rounded-full flex items-center justify-center flex-shrink-0 text-3xl">
              {personaLocal ? 'üë§' : 'üë•'}
            </div>
            <div class="text-left">
              <p class="text-lg font-medium mb-1">
                {personaLocal
                  ? `Comme ${persona.nom}, ${metier.nomCourt} √† ${ville.nom}...`
                  : `Comme d'autres ${metier.nomCourt} √† ${ville.nom}...`
                }
              </p>
              <p class="text-white/90 italic">
                "{personaLocal ? persona.citation : (personaGenerique?.citation || "Je veux √™tre plus visible dans ma ville.")}"
              </p>
            </div>
          </div>
        </div>

        <p class="text-2xl mb-8 text-white/90">{intentionData.description}</p>

        <!-- CTA principal -->
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <IntentionAnimation intention="transactionnelle" type="button" class="text-lg px-8 py-4">
            <a href="/contact" class="flex items-center gap-2">
              <span>üìû</span>
              <span>Demander mon audit gratuit</span>
            </a>
          </IntentionAnimation>

          <a href={`/etudes-de-cas/${metier.id === 'artisans' ? 'plombier-meru' :
            metier.id === 'commerces' ? 'caviste-cergy' :
              metier.id === 'profession-liberale' ? 'avocat-montmorency' :
                metier.id === 'tpe-pme' ? 'transport-compiegne' :
                  metier.id === 'reseaux-franchise' ? 'franchise-cergy' : 'hotel-chantilly'}`}
             class="bg-white text-primary-600 hover:bg-gray-100 px-8 py-4 rounded-full font-semibold text-lg transition-colors">
            Voir un cas concret
          </a>
        </div>

        <p class="text-sm mt-4 text-white/80">
          Ou appelez-moi directement : <a href="tel:0660921008" class="font-bold underline">06 60 92 10 08</a>
        </p>
      </div>
    </div>
  </section>

  <!-- SECTION A : Sp√©cificit√©s de la ville -->
  <section class="py-12 bg-gray-50">
    <div class="container-custom">
      <div class="max-w-3xl mx-auto">
        <h2 class="text-2xl font-bold text-center mb-4">Pourquoi {ville.nom} ?</h2>
        <p class="text-center text-gray-700 mb-8">
          {ville.description || `Ville dynamique situ√©e dans le ${ville.zone === "60" ? "d√©partement de l'Oise" : "Val-d'Oise"}, ${ville.nom} offre un fort potentiel pour les professionnels locaux.`}
        </p>

        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
          <div class="bg-white p-4 rounded-lg text-center">
            <span class="text-2xl font-bold text-primary-600">{ville.population?.toLocaleString() || 'N/A'}</span>
            <span class="block text-xs text-gray-600">habitants</span>
          </div>
          <div class="bg-white p-4 rounded-lg text-center">
            <span class="text-2xl font-bold text-primary-600">{ville.codePostal}</span>
            <span class="block text-xs text-gray-600">code postal</span>
          </div>
          <div class="bg-white p-4 rounded-lg text-center">
            <span class="text-2xl font-bold text-primary-600">{ville.zone === "60" ? "Oise" : "Val-d'Oise"}</span>
            <span class="block text-xs text-gray-600">d√©partement</span>
          </div>
          <div class="bg-white p-4 rounded-lg text-center">
            <span class="text-2xl font-bold text-primary-600">{ville.alentours.length}</span>
            <span class="block text-xs text-gray-600">communes autour</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- SECTION B : Chiffres cl√©s locaux -->
  {(() => {
    const statsVille = {
      entreprises: Math.floor(ville.population / 10) || 500,
      artisans: Math.floor(ville.population / 50) || 100,
      commerces: Math.floor(ville.population / 100) || 50
    };

    return (
        <section class="py-12 bg-white border-b">
          <div class="container-custom">
            <div class="grid grid-cols-2 md:grid-cols-3 gap-4 max-w-3xl mx-auto text-center">
              <div class="bg-primary-50 p-4 rounded-xl">
                <div class="text-2xl font-bold text-primary-600">{statsVille.entreprises}+</div>
                <div class="text-xs text-gray-600">entreprises</div>
              </div>
              <div class="bg-primary-50 p-4 rounded-xl">
                <div class="text-2xl font-bold text-primary-600">{statsVille.artisans}+</div>
                <div class="text-xs text-gray-600">artisans</div>
              </div>
              <div class="bg-primary-50 p-4 rounded-xl">
                <div class="text-2xl font-bold text-primary-600">{statsVille.commerces}+</div>
                <div class="text-xs text-gray-600">commerces</div>
              </div>
            </div>
          </div>
        </section>
    );
  })()}

  <!-- SECTION 1 : Pourquoi c'est important ici (ENRICHIE) -->
  <section class="py-20">
    <div class="container-custom">
      <div class="grid md:grid-cols-2 gap-12 items-center">
        <div>
          <h2 class="text-3xl font-bold mb-6">
            Pourquoi les {metier.nomCourt} √† {ville.nom} ont besoin de {service.nomCourt}
          </h2>

          <!-- NOUVEAU : Donn√©es locales enrichies -->
          <div class="bg-primary-50 p-4 rounded-lg mb-6">
            <p class="text-sm">
              <strong>üìç {ville.nom} en chiffres :</strong><br>
              ‚Ä¢ {ville.population?.toLocaleString() || 'Plusieurs milliers d'} habitants<br>
              ‚Ä¢ {statsVille.entreprises} entreprises<br>
              ‚Ä¢ {statsVille.artisans} artisans<br>
              ‚Ä¢ {ville.alentours.length} communes dans la zone d'intervention
            </p>
          </div>

          <p class="text-lg text-gray-700 mb-6">
            {ville.description || `√Ä ${ville.nom} et dans ses environs, la concurrence est r√©elle.`}
          </p>
          <ul class="space-y-3">
            <li class="flex items-start gap-2">
              <span class="text-primary-600 text-xl">‚úì</span>
              <span><strong>Concurrence locale</strong> ‚Äì {ville.alentours.length} communes autour cherchent des {metier.nomCourt}</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-primary-600 text-xl">‚úì</span>
              <span><strong>Visibilit√© imm√©diate</strong> ‚Äì Apparaissez dans le pack Google local</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-primary-600 text-xl">‚úì</span>
              <span><strong>Clients qualifi√©s</strong> ‚Äì Ceux qui cherchent pr√®s de chez vous</span>
            </li>
          </ul>
        </div>
        <div class="bg-gray-50 p-8 rounded-xl">
          <h3 class="text-2xl font-bold mb-4">Ce que je vous propose</h3>
          <ul class="space-y-3 mb-6">
            <li class="flex items-start gap-2">üìä Audit gratuit de votre visibilit√© √† {ville.nom}</li>
            <li class="flex items-start gap-2">üéØ Strat√©gie sur-mesure pour les {metier.nomCourt}</li>
            <li class="flex items-start gap-2">üìç Ciblage des {ville.alentours.length} communes alentours</li>
          </ul>
          <a href="/methodologie" class="text-primary-600 hover:underline">D√©couvrir ma m√©thode ‚Üí</a>
        </div>
      </div>
    </div>
  </section>

  <!-- SECTION 2 : Villes alentours -->
  <section class="bg-gray-50 py-16">
    <div class="container-custom">
      <h2 class="text-3xl font-bold text-center mb-4">J'interviens aussi dans les environs</h2>
      <p class="text-center text-gray-600 mb-8">Je me d√©place dans toutes ces communes proches de {ville.nom}.</p>

      <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 max-w-4xl mx-auto">
        {ville.alentours.map(alentour => {
          const nomAlentour = typeof alentour === 'string' ? alentour.split(' (')[0] : alentour;
          return (
              <div class="bg-white p-3 rounded-lg text-center border border-gray-100 hover:shadow-sm">
                <div class="font-medium">{nomAlentour}</div>
                <div class="text-xs text-gray-500 mt-1">intervention possible</div>
              </div>
          );
        })}
      </div>
    </div>
  </section>

  <!-- SECTION 3 : Autres villes pour ce service+m√©tier -->
  <section class="py-16">
    <div class="container-custom">
      <h3 class="text-xl font-bold text-center mb-6">√âgalement disponible dans d'autres villes</h3>
      <div class="flex flex-wrap justify-center gap-3">
        {autresVilles.map(autreVille => (
            <a
                href={`/services/${service.id}/${metier.id}/${autreVille.id}`}
                class="bg-gray-100 px-4 py-2 rounded-full text-sm hover:bg-primary-100 hover:text-primary-600 transition-colors"
            >
              {autreVille.nom}
            </a>
        ))}
        <a href="/villes" class="bg-primary-50 text-primary-600 px-4 py-2 rounded-full text-sm hover:bg-primary-100 transition-colors">
          Toutes les villes
        </a>
      </div>
    </div>
  </section>

  <!-- SECTION 4 : Autres services pour ce m√©tier dans cette ville -->
  <section class="bg-gray-50 py-20">
    <div class="container-custom">
      <h2 class="text-3xl font-bold text-center mb-4">D'autres services pour les {metier.nomCourt} √† {ville.nom}</h2>
      <p class="text-center text-gray-600 mb-12">Compl√©tez votre strat√©gie avec ces solutions.</p>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-5xl mx-auto">
        {autresServices.map(autreService => (
            <a
                href={`/services/${autreService.id}/${metier.id}/${ville.id}`}
                class="bg-white p-6 rounded-xl border border-gray-100 hover:shadow-md transition-all group"
            >
              <h3 class="text-lg font-bold mb-2 group-hover:text-primary-600">{autreService.nom}</h3>
              <p class="text-sm text-gray-600 mb-3">{autreService.description}</p>
              <span class="text-primary-600 text-sm group-hover:translate-x-2 transition-transform inline-block">
              D√©couvrir ‚Üí
            </span>
            </a>
        ))}
      </div>
    </div>
  </section>

  <!-- SECTION 5 : T√©moignages clients (preuve sociale) -->
  <section class="py-20 bg-gray-50">
    <div class="container-custom">
      <h2 class="text-3xl font-bold text-center mb-4">Ils nous ont fait confiance</h2>
      <p class="text-center text-gray-600 mb-12">D√©couvrez ce que disent d'autres {metier.nomCourt} comme vous.</p>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto">
        {temoignagesAAfficher.map((temoignage, index) => (
            <div class="bg-white p-6 rounded-2xl shadow-md hover:shadow-lg transition-all">
              <div class="flex items-start gap-4 mb-4">
                <div class="w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0 text-2xl">
                  {temoignage.icone || 'üë§'}
                </div>
                <div>
                  <p class="font-semibold text-lg">{temoignage.nom}</p>
                  <p class="text-sm text-gray-600">{temoignage.entreprise}</p>
                  <p class="text-xs text-gray-500">{temoignage.ville}</p>
                </div>
              </div>

              <div class="mb-3 text-yellow-400 text-lg">
                ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ
              </div>

              <blockquote class="text-gray-700 italic mb-4">
                "{temoignage.citation}"
              </blockquote>

              <div class="mt-3 text-green-700 font-bold">
                {temoignage.resultat}
              </div>

              <a href={`/etudes-de-cas/${temoignage.etude}`} class="inline-block mt-4 text-primary-600 text-sm hover:underline">
                Voir son histoire ‚Üí
              </a>
            </div>
        ))}
      </div>

      <div class="text-center mt-12">
        <a href="/etudes-de-cas" class="text-primary-600 hover:underline font-medium">
          Voir toutes les √©tudes de cas ‚Üí
        </a>
      </div>
    </div>
  </section>

  <!-- SECTION 6 : Ressources associ√©es -->
  <section class="bg-gray-50 py-20">
    <div class="container-custom">
      <h2 class="text-3xl font-bold text-center mb-4">Ressources pour les {metier.nomCourt} √† {ville.nom}</h2>
      <p class="text-center text-gray-600 mb-12">Guides et articles pour approfondir.</p>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto">
        <!-- Guide SEO local -->
        <a href="/ressources/guides/seo-local-artisans-2025" class="bg-white p-6 rounded-xl border border-gray-100 hover:shadow-md transition-all">
          <div class="text-3xl mb-3">üìò</div>
          <h3 class="font-bold mb-2">Guide SEO local pour {metier.nomCourt}</h3>
          <p class="text-sm text-gray-600 mb-3">Toutes les cl√©s pour √™tre visible dans votre ville.</p>
          <span class="text-primary-600 text-sm">T√©l√©charger ‚Üí</span>
        </a>

        <!-- Article avis Google -->
        <a href="/ressources/blog/avis-google-importance" class="bg-white p-6 rounded-xl border border-gray-100 hover:shadow-md transition-all">
          <div class="text-3xl mb-3">üìù</div>
          <h3 class="font-bold mb-2">Pourquoi les avis sont cruciaux</h3>
          <p class="text-sm text-gray-600 mb-3">Comment obtenir plus d'avis et mieux convertir.</p>
          <span class="text-primary-600 text-sm">Lire l'article ‚Üí</span>
        </a>

        <!-- Formation -->
        <a href="/services/formation" class="bg-white p-6 rounded-xl border border-gray-100 hover:shadow-md transition-all">
          <div class="text-3xl mb-3">üéì</div>
          <h3 class="font-bold mb-2">Formation SEO pour {metier.nomCourt}</h3>
          <p class="text-sm text-gray-600 mb-3">Devenez autonome sur votre r√©f√©rencement.</p>
          <span class="text-primary-600 text-sm">En savoir plus ‚Üí</span>
        </a>
      </div>
    </div>
  </section>

  <!-- SECTION 7 : FAQ sp√©cifique -->
  <section class="py-20">
    <div class="container-custom max-w-3xl">
      <h2 class="text-3xl font-bold text-center mb-4">Questions fr√©quentes</h2>
      <p class="text-center text-gray-600 mb-12">Sur le {service.nom} pour les {metier.nomCourt} √† {ville.nom}.</p>

      <div class="space-y-4">
        <details class="bg-gray-50 p-6 rounded-lg">
          <summary class="font-semibold cursor-pointer">Combien de temps pour voir des r√©sultats √† {ville.nom} ?</summary>
          <p class="mt-3 text-gray-600">Les premiers r√©sultats apparaissent g√©n√©ralement entre 1 et 3 mois. Pour les {metier.nomCourt} √† {ville.nom}, on voit souvent des am√©liorations rapides sur Google My Business.</p>
        </details>

        <details class="bg-gray-50 p-6 rounded-lg">
          <summary class="font-semibold cursor-pointer">Quel budget pour {metier.nomCourt === 'artisans' ? 'un artisan' : 'un ' + metier.nomCourt} √† {ville.nom} ?</summary>
          <p class="mt-3 text-gray-600">Je propose des devis personnalis√©s apr√®s un audit gratuit. Pour {ville.nom}, comptez entre 300‚Ç¨ et 800‚Ç¨ par mois selon vos objectifs.</p>
        </details>

        <details class="bg-gray-50 p-6 rounded-lg">
          <summary class="font-semibold cursor-pointer">Intervenez-vous aussi dans les villages autour ?</summary>
          <p class="mt-3 text-gray-600">Oui ! Je me d√©place dans toutes les communes autour de {ville.nom} : {ville.alentours.slice(0, 3).map(a => typeof a === 'string' ? a.split(' (')[0] : a).join(', ')} et bien d'autres.</p>
        </details>
      </div>

      <div class="text-center mt-8">
        <a href="/ressources/faq" class="text-primary-600 hover:underline">
          Voir toutes les FAQ ‚Üí
        </a>
      </div>
    </div>
  </section>

  <!-- SECTION 8 : Autres m√©tiers dans cette ville -->
  <section class="bg-gray-50 py-16">
    <div class="container-custom">
      <h3 class="text-lg font-semibold text-center mb-6">Ce service √† {ville.nom} pour d'autres m√©tiers</h3>
      <div class="flex flex-wrap justify-center gap-3">
        {metiers.filter(m => m.id !== metier.id).slice(0, 5).map(autreMetier => (
            <a
                href={`/services/${service.id}/${autreMetier.id}/${ville.id}`}
                class="bg-white px-4 py-2 rounded-full text-sm hover:bg-primary-100 hover:text-primary-600 transition-colors"
            >
              {autreMetier.nomCourt}
            </a>
        ))}
        <a href="/metiers" class="bg-primary-50 text-primary-600 px-4 py-2 rounded-full text-sm hover:bg-primary-100 transition-colors">
          Tous les m√©tiers
        </a>
      </div>
    </div>
  </section>

  <!-- SECTION : Besoin urgent ? -->
  {metier.id === 'artisans' || metier.id === 'commerces' ? (
      <section class="py-12 bg-red-50 rounded-2xl my-8">
        <div class="container-custom text-center">
          <h3 class="text-2xl font-bold mb-3 text-red-700">‚ö†Ô∏è Intervention urgente ?</h3>
          <p class="text-gray-700 mb-4">
            Vous avez besoin d'un {metier.nomCourt} en urgence √† {ville.nom} ?
          </p>
          <a
              href={`/urgence/${metier.id}/${ville.id}`}
              class="btn-primary bg-red-600 hover:bg-red-700 border-none"
          >
            Voir notre page urgence
          </a>
        </div>
      </section>
  ) : null}

  <!-- SECTION 9 : CTA final -->
  <section class="bg-primary-600 text-white py-20">
    <div class="container-custom text-center max-w-3xl">
      <h2 class="text-4xl font-bold mb-4">
        Vous √™tes {metier.nomCourt === 'artisans' ? 'artisan' :
        metier.nomCourt === 'commerces' ? 'commer√ßant' :
          metier.nomCourt === 'profession-liberale' ? 'professionnel lib√©ral' :
            metier.nomCourt === 'tpe-pme' ? 'dirigeant d\'entreprise' :
              metier.nomCourt === 'reseaux-franchise' ? 'responsable de r√©seau' :
                'professionnel'} √† {ville.nom} ?
      </h2>
      <p class="text-xl mb-8 opacity-90">
        Je vous propose un audit gratuit pour analyser votre visibilit√© locale et voir comment attirer plus de clients.
      </p>

      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a href="/contact" class="bg-white text-primary-600 hover:bg-gray-100 px-8 py-4 rounded-full font-semibold text-lg transition-colors">
          Demander mon audit gratuit
        </a>
        <a href="tel:0660921008" class="bg-transparent border-2 border-white text-white hover:bg-white/10 px-8 py-4 rounded-full font-semibold text-lg transition-colors">
          üìû 06 60 92 10 08
        </a>
      </div>

      <p class="text-sm mt-6 text-white/80">
        Disponible 7j/7 ‚Ä¢ Intervention rapide dans le {ville.zone === "60" ? "60" : "95"}
      </p>
    </div>
  </section>

  <!-- CTA flottant mobile -->
  <div class="fixed bottom-0 left-0 right-0 bg-white shadow-lg p-4 md:hidden z-50 border-t border-primary-200">
    <div class="flex gap-4">
      <a href="tel:0660921008" class="flex-1 bg-primary-600 text-white py-3 rounded-full font-bold text-center">
        üìû APPELER
      </a>
      <a href="/contact" class="flex-1 bg-primary-600 text-white py-3 rounded-full font-bold text-center">
        AUDIT GRATUIT
      </a>
    </div>
  </div>
</Layout>