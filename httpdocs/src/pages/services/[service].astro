---
// src/pages/services/[service].astro
import Layout from "../../layouts/Layout.astro";
import services from "../../data/services.json";
import metiers from "../../data/metiers.json";
import villes from "../../data/villes.json";

export async function getStaticPaths() {
  return services.map(service => ({
    params: { service: service.id },
    props: { service }
  }));
}

const { service } = Astro.props;

// M√©tiers recommand√©s pour ce service
const metiersConseilles = metiers.filter(m =>
  service.id === 'seo-local' ? ['artisans', 'commerces', 'profession-liberale'].includes(m.id) :
    service.id === 'google-ads' ? ['commerces', 'tpe-pme', 'reseaux-franchise'].includes(m.id) :
      service.id === 'cro' ? ['profession-liberale', 'tpe-pme', 'reseaux-franchise'].includes(m.id) :
        service.id === 'creation-site' ? ['artisans', 'commerces', 'tpe-pme'].includes(m.id) :
          service.id === 'gmb' ? ['artisans', 'commerces', 'reseaux-franchise'].includes(m.id) :
            service.id === 'formation' ? ['artisans', 'commerces', 'profession-liberale'].includes(m.id) :
              []
).slice(0, 4);

// Villes principales pour les exemples
const villesExemples = villes.slice(0, 6);

// Mapping des cas clients par service
const casParService = {
  'seo-local': [
    { metier: 'artisans', nom: 'Robert', entreprise: 'Plomberie Martin', ville: 'M√©ru', resultat: '+650% d\'appels', etude: 'plombier-meru' },
    { metier: 'commerces', nom: 'Sophie', entreprise: 'Cave des 3 Rois', ville: 'Cergy', resultat: '+30% de clients', etude: 'caviste-cergy' },
    { metier: 'profession-liberale', nom: 'Ma√Ætre Dupont', entreprise: 'Cabinet Dupont', ville: 'Montmorency', resultat: '+200% de rendez-vous', etude: 'avocat-montmorency' }
  ],
  'google-ads': [
    { metier: 'commerces', nom: 'Sophie', entreprise: 'Cave des 3 Rois', ville: 'Cergy', resultat: '+30% de clients', etude: 'caviste-cergy' },
    { metier: 'commerces', nom: 'Isabelle', entreprise: 'Coiffure Isabelle', ville: 'Argenteuil', resultat: '+35% de clients', etude: 'coiffeuse-argenteuil' },
    { metier: 'tourisme', nom: 'Pierre', entreprise: 'Restaurant', ville: 'Compi√®gne', resultat: '+200 couverts', etude: 'restaurateur-compiegne' }
  ],
  'cro': [
    { metier: 'profession-liberale', nom: 'Ma√Ætre Dupont', entreprise: 'Cabinet Dupont', ville: 'Montmorency', resultat: '+200% de rendez-vous', etude: 'avocat-montmorency' },
    { metier: 'profession-liberale', nom: 'Dr. Martin', entreprise: 'M√©decine g√©n√©rale', ville: 'Senlis', resultat: '+180% de rendez-vous', etude: 'medecin-senlis' },
    { metier: 'tpe-pme', nom: 'Philippe', entreprise: 'Menuiserie Durand', ville: 'Creil', resultat: '+200% de trafic', etude: 'macon-creil' }
  ],
  'creation-site': [
    { metier: 'artisans', nom: 'Michel', entreprise: 'Menuiserie Dubois', ville: 'Chambly', resultat: '+500% de devis', etude: 'menuisier-chambly' },
    { metier: 'tpe-pme', nom: 'Franck', entreprise: 'Transports Moreau', ville: 'Compi√®gne', resultat: '+150% de devis', etude: 'transport-compiegne' },
    { metier: 'profession-liberale', nom: 'Claire', entreprise: 'Atelier Architecture', ville: 'Montmorency', resultat: '+200% de devis', etude: 'architecte-montmorency' }
  ],
  'gmb': [
    { metier: 'artisans', nom: 'Jean-Claude', entreprise: 'Lefebvre √âlectricit√©', ville: 'Beauvais', resultat: '+400% de visibilit√©', etude: 'electricien-beauvais' },
    { metier: 'commerces', nom: 'C√©line', entreprise: 'Fleuriste C√©line', ville: 'Cergy', resultat: '+40% de CA', etude: 'fleuriste-cergy' },
    { metier: 'reseaux-franchise', nom: 'Caroline', entreprise: 'Boulangeries', ville: 'Cergy', resultat: '+450 avis', etude: 'franchise-cergy' }
  ],
  'formation': [
    { metier: 'artisans', nom: 'Robert', entreprise: 'Plomberie Martin', ville: 'M√©ru', resultat: 'Autonome en 2 mois', etude: 'plombier-meru' },
    { metier: 'commerces', nom: 'Sophie', entreprise: 'Cave des 3 Rois', ville: 'Cergy', resultat: 'G√®re ses annonces seule', etude: 'caviste-cergy' },
    { metier: 'tpe-pme', nom: 'Sylvie', entreprise: 'Beauvais Nettoyage', ville: 'Beauvais', resultat: '+250% contrats pros', etude: 'nettoyage-beauvais' }
  ]
};

const casService = casParService[service.id] || [];
const autresServices = services.filter(s => s.id !== service.id).slice(0, 4);
---

<Layout
    title={`${service.nom} | Horizon Conversion`}
    description={service.description}
>

  <!-- Hero -->
  <section class="bg-gradient-to-br from-primary-50 to-indigo-50 py-20">
    <div class="container-custom">
      <div class="max-w-4xl mx-auto">
        <nav class="text-sm text-gray-600 mb-8">
          <a href="/services" class="hover:text-primary-600">Services</a> ‚Ä∫
          <span class="text-gray-900">{service.nom}</span>
        </nav>

        <h1 class="text-5xl font-bold text-gray-900 mb-6">{service.nom}</h1>
        <p class="text-xl text-gray-700 mb-8 max-w-3xl">{service.description}</p>

        <div class="flex flex-wrap gap-4 items-center">
          <span class="bg-white px-4 py-2 rounded-full text-sm shadow-sm">üéØ {service.benefice}</span>
          <span class="bg-primary-100 text-primary-700 px-4 py-2 rounded-full text-sm">
            {service.premium ? '‚≠ê Service premium' : 'üîß Service compl√©mentaire'}
          </span>
        </div>
      </div>
    </div>
  </section>

  <!-- SECTION 1 : B√©n√©fices d√©taill√©s -->
  <section class="py-20">
    <div class="container-custom">
      <div class="grid md:grid-cols-2 gap-16">
        <div>
          <h2 class="text-3xl font-bold mb-6">Pourquoi choisir ce service ?</h2>
          <div class="space-y-6">
            <div class="flex items-start gap-4">
              <div class="w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0">
                <span class="text-primary-600 text-xl">‚úì</span>
              </div>
              <div>
                <h3 class="font-semibold text-lg mb-1">Expertise locale</h3>
                <p class="text-gray-600">Je connais parfaitement le tissu √©conomique de l'Oise et du Val-d'Oise pour adapter ma strat√©gie.</p>
              </div>
            </div>
            <div class="flex items-start gap-4">
              <div class="w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0">
                <span class="text-primary-600 text-xl">‚ö°</span>
              </div>
              <div>
                <h3 class="font-semibold text-lg mb-1">R√©sultats mesurables</h3>
                <p class="text-gray-600">Chaque action est suivie et report√©e. Vous savez exactement ce que produit votre investissement.</p>
              </div>
            </div>
            <div class="flex items-start gap-4">
              <div class="w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0">
                <span class="text-primary-600 text-xl">ü§ù</span>
              </div>
              <div>
                <h3 class="font-semibold text-lg mb-1">Accompagnement direct</h3>
                <p class="text-gray-600">Vous travaillez avec moi, pas avec un commercial ou un chef de projet. Interlocuteur unique.</p>
              </div>
            </div>
          </div>
        </div>
        <div class="bg-gray-50 p-8 rounded-xl">
          <h2 class="text-2xl font-bold mb-6">Comment je le mets en ≈ìuvre</h2>
          <div class="space-y-4">
            <div class="bg-white p-4 rounded-lg">
              <div class="font-semibold text-primary-600 mb-1">1. Audit</div>
              <p class="text-sm text-gray-600">Analyse de votre situation actuelle, de vos concurrents, de vos objectifs.</p>
            </div>
            <div class="bg-white p-4 rounded-lg">
              <div class="font-semibold text-primary-600 mb-1">2. Strat√©gie</div>
              <p class="text-sm text-gray-600">Plan d'action d√©taill√©, adapt√© √† votre m√©tier et votre zone.</p>
            </div>
            <div class="bg-white p-4 rounded-lg">
              <div class="font-semibold text-primary-600 mb-1">3. Ex√©cution</div>
              <p class="text-sm text-gray-600">Mise en place des actions, avec suivi bi-mensuel.</p>
            </div>
            <div class="bg-white p-4 rounded-lg">
              <div class="font-semibold text-primary-600 mb-1">4. Reporting</div>
              <p class="text-sm text-gray-600">Tableaux de bord personnalis√©s, analyse des r√©sultats.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- SECTION 2 : Pour quels m√©tiers -->
  <section class="bg-gray-50 py-20">
    <div class="container-custom">
      <h2 class="text-3xl font-bold text-center mb-12">Pour quels m√©tiers ?</h2>

      <div class="grid grid-cols-2 md:grid-cols-4 gap-4 max-w-3xl mx-auto">
        {metiersConseilles.map(metier => (
            <a href={`/services/${service.id}/${metier.id}`} class="bg-white p-4 rounded-xl text-center hover:shadow-md transition-all group">
              <div class="font-semibold group-hover:text-primary-600">{metier.nomCourt}</div>
              <div class="text-xs text-gray-500 mt-1">{metier.description}</div>
            </a>
        ))}
      </div>

      <div class="text-center mt-8">
        <a href="/metiers" class="text-primary-600 hover:underline">Voir tous les m√©tiers ‚Üí</a>
      </div>
    </div>
  </section>

  <!-- SECTION 3 : Villes disponibles -->
  <section class="py-20">
    <div class="container-custom">
      <h2 class="text-3xl font-bold text-center mb-4">Disponible dans toutes nos villes</h2>
      <p class="text-center text-gray-600 mb-12">Je travaille dans tout l'Oise et le Val-d'Oise.</p>

      <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4">
        {villesExemples.map(ville => (
            <a href={`/services/${service.id}/${ville.id}`} class="card p-4 text-center hover:border-primary-300">
              <div class="font-semibold">{ville.nom}</div>
              <div class="text-xs text-gray-500">{ville.codePostal}</div>
            </a>
        ))}
      </div>

      <div class="text-center mt-8">
        <a href="/villes" class="text-primary-600 hover:underline">Voir toutes les villes ‚Üí</a>
      </div>
    </div>
  </section>

  <!-- SECTION 4 : R√©sultats concrets (3 cas) -->
  <section class="bg-primary-50 py-20">
    <div class="container-custom">
      <h2 class="text-3xl font-bold text-center mb-4">R√©sultats concrets</h2>
      <p class="text-center text-gray-700 mb-12">D√©couvrez comment ce service a aid√© d'autres professionnels.</p>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto">
        {casService.map(cas => (
            <div class="bg-white p-6 rounded-2xl shadow-md hover:shadow-lg transition-all">
              <div class="flex justify-between items-start mb-3">
                <span class="badge-consultant text-xs">{cas.metier}</span>
                <span class="text-sm text-gray-500">{cas.ville}</span>
              </div>

              <p class="font-semibold text-lg mb-1">{cas.nom}</p>
              <p class="text-sm text-gray-600 mb-3">{cas.entreprise}</p>

              <div class="mt-2 text-green-700 font-bold text-xl mb-3">
                {cas.resultat}
              </div>

              <a href={`/etudes-de-cas/${cas.etude}`} class="inline-block text-primary-600 text-sm hover:underline">
                Voir l'√©tude compl√®te ‚Üí
              </a>
            </div>
        ))}
      </div>

      <div class="text-center mt-12">
        <a href="/etudes-de-cas" class="text-primary-600 hover:underline font-medium">
          Voir toutes les √©tudes de cas ‚Üí
        </a>
      </div>
    </div>
  </section>

  <!-- SECTION 5 : FAQ rapide -->
  <section class="py-20">
    <div class="container-custom max-w-3xl">
      <h2 class="text-3xl font-bold text-center mb-12">Questions fr√©quentes</h2>

      <div class="space-y-4">
        <details class="bg-gray-50 p-4 rounded-lg">
          <summary class="font-semibold cursor-pointer">Combien de temps avant d'avoir des r√©sultats ?</summary>
          <p class="mt-2 text-gray-600">Les premiers r√©sultats apparaissent g√©n√©ralement entre 1 et 3 mois selon le service et la concurrence locale.</p>
        </details>

        <details class="bg-gray-50 p-4 rounded-lg">
          <summary class="font-semibold cursor-pointer">Quel est l'investissement mensuel ?</summary>
          <p class="mt-2 text-gray-600">Tout d√©pend de vos objectifs et de votre zone. Je propose des devis personnalis√©s apr√®s un audit gratuit.</p>
        </details>

        <details class="bg-gray-50 p-4 rounded-lg">
          <summary class="font-semibold cursor-pointer">Est-ce que √ßa marche pour mon m√©tier ?</summary>
          <p class="mt-2 text-gray-600">J'accompagne tous types de m√©tiers. Chaque strat√©gie est adapt√©e √† votre activit√© sp√©cifique.</p>
        </details>
      </div>
    </div>
  </section>

  <!-- SECTION 6 : Ressources associ√©es -->
  <section class="bg-gray-50 py-20">
    <div class="container-custom">
      <h2 class="text-3xl font-bold text-center mb-4">Ressources pour aller plus loin</h2>
      <p class="text-center text-gray-600 mb-12">Guides et articles pour approfondir.</p>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto">
        <a href="/ressources/guides/seo-local-artisans-2025" class="bg-white p-6 rounded-xl border border-gray-100 hover:shadow-md transition-all">
          <div class="text-3xl mb-3">üìò</div>
          <h3 class="font-bold mb-2">Guide SEO local</h3>
          <p class="text-sm text-gray-600">Toutes les cl√©s pour √™tre visible dans votre ville.</p>
          <span class="text-primary-600 text-sm">T√©l√©charger ‚Üí</span>
        </a>

        <a href="/ressources/blog/avis-google-importance" class="bg-white p-6 rounded-xl border border-gray-100 hover:shadow-md transition-all">
          <div class="text-3xl mb-3">üìù</div>
          <h3 class="font-bold mb-2">Pourquoi les avis sont cruciaux</h3>
          <p class="text-sm text-gray-600">Comment obtenir plus d'avis et mieux convertir.</p>
          <span class="text-primary-600 text-sm">Lire l'article ‚Üí</span>
        </a>

        <a href="/methodologie" class="bg-white p-6 rounded-xl border border-gray-100 hover:shadow-md transition-all">
          <div class="text-3xl mb-3">üîç</div>
          <h3 class="font-bold mb-2">Ma m√©thode</h3>
          <p class="text-sm text-gray-600">D√©couvrez comment je travaille en 4 phases.</p>
          <span class="text-primary-600 text-sm">D√©couvrir ‚Üí</span>
        </a>
      </div>
    </div>
  </section>

  <!-- SECTION 7 : Autres services (maillage interne) -->
  <section class="py-20">
    <div class="container-custom">
      <h2 class="text-3xl font-bold text-center mb-4">D'autres services pour vous</h2>
      <p class="text-center text-gray-600 mb-12">Compl√©tez votre strat√©gie avec ces solutions.</p>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        {autresServices.map(autreService => (
            <a href={`/services/${autreService.id}`} class="bg-white p-6 rounded-xl border border-gray-100 hover:shadow-md transition-all group">
              <h3 class="text-lg font-bold mb-2 group-hover:text-primary-600">{autreService.nom}</h3>
              <p class="text-sm text-gray-600 mb-3">{autreService.description}</p>
              <span class="text-primary-600 text-sm group-hover:translate-x-2 transition-transform inline-block">
                D√©couvrir ‚Üí
              </span>
            </a>
        ))}
      </div>
    </div>
  </section>

  <!-- SECTION 8 : T√©moignages clients -->
  <section class="bg-gray-50 py-16">
    <div class="container-custom">
      <h2 class="text-3xl font-bold text-center mb-4">Ils nous ont fait confiance</h2>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-5xl mx-auto">
        <div class="bg-white p-6 rounded-xl">
          <div class="text-yellow-400 text-lg mb-2">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <p class="text-gray-700 italic mb-3">"Un accompagnement personnalis√© et des r√©sultats au rendez-vous. Je recommande !"</p>
          <p class="font-semibold">Robert, plombier √† M√©ru</p>
        </div>
        <div class="bg-white p-6 rounded-xl">
          <div class="text-yellow-400 text-lg mb-2">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <p class="text-gray-700 italic mb-3">"Mes clients me trouvent directement sur Google, je ne peux plus m'en passer."</p>
          <p class="font-semibold">Sophie, caviste √† Cergy</p>
        </div>
        <div class="bg-white p-6 rounded-xl">
          <div class="text-yellow-400 text-lg mb-2">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
          <p class="text-gray-700 italic mb-3">"Mon taux de rendez-vous a doubl√© sans changer mes annonces. Exceptionnel !"</p>
          <p class="font-semibold">Ma√Ætre Dupont, avocat</p>
        </div>
      </div>
    </div>
  </section>

  <!-- SECTION 9 : CTA final -->
  <section class="bg-primary-600 text-white py-16">
    <div class="container-custom text-center">
      <h2 class="text-3xl font-bold mb-4">Pr√™t √† discuter de votre projet ?</h2>
      <p class="text-xl mb-8 opacity-90 max-w-2xl mx-auto">
        Parlons de vos objectifs et voyons comment ce service peut vous aider.
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a href="/contact" class="bg-white text-primary-600 hover:bg-gray-100 px-8 py-4 rounded-full font-semibold text-lg transition-colors">
          Demander un audit gratuit
        </a>
        <a href="tel:0660921008" class="bg-transparent border-2 border-white text-white hover:bg-white/10 px-8 py-4 rounded-full font-semibold text-lg transition-colors">
          üìû 06 60 92 10 08
        </a>
      </div>
    </div>
  </section>

</Layout>