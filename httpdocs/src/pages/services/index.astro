---
// src/pages/services/index.astro
import BaseLayout from "../../layouts/BaseLayout.astro";
import PageTitle from "../../components/PageTitle.astro";
import HeroCard from "../../components/HeroCard.astro";
import Process from "../../components/Process.astro";
import Services from "../../components/Services.astro";
import ZonesVilles from "../../components/ZonesVilles.astro";
import Preuves from "../../components/Preuves.astro";
import Faqs from "../../components/Faqs.astro";
import MaillageInterne from "../../components/MaillageInterne.astro";

import { buildModel } from "../../lib/pageModel";

const model = buildModel({
  type: "home",
  canonical: "/services/",
});

// contexte spécifique pour tes rules (maillage/hero variants)
const contexte = { ...model.contexte, type: "servicesIndex" };

// SEO : on laisse services_page.json piloter si présent
const seo = model.blocks.servicesPage?.seo ?? {
  title: `Services | ${model.site.name}`,
  description:
    "SEO local, Google Ads et Meta Ads : des actions simples pour obtenir plus d’appels et de formulaires. Audit gratuit.",
  canonical: "/services/",
};

const breadcrumbItems = [
  { label: "Accueil", href: "/" },
  { label: "Services", href: "/services/" },
];
---

<BaseLayout seo={seo} site={model.site}>
  <PageTitle contexte={contexte} seo={seo} breadcrumbItems={breadcrumbItems} />

  <section id="content">
    <div class="content-wrap py-0 overflow-visible">

      <HeroCard data={model.hero.card} contexte={contexte} cta={model.blocks.servicesPage?.hero} />

      <Process data={model.blocks.process} contexte={contexte} />

      <Services data={model.blocks.services} page={model.blocks.servicesPage} contexte={contexte} />

      <ZonesVilles data={{ zones: model.blocks.zones, villes: model.blocks.villes }} contexte={contexte} />

      <Preuves data={model.blocks.preuves} contexte={contexte} />

      <Faqs
          items={model.faqs}
          data={{ badge: "FAQ", title: "Questions fréquentes", intro: "Réponses simples et concrètes." }}
          contexte={contexte}
      />

      <MaillageInterne data={model.blocks.maillageInterne} contexte={contexte} />

    </div>
  </section>
</BaseLayout>
