---
// src/pages/services/index.astro

import Head from "../../components/Head.astro";
import TopBar from "../../components/TopBar.astro";
import Header from "../../components/Header.astro";
import Testimonials from "../../components/Testimonials.astro";
import Footer from "../../components/Footer.astro";
import JavaScripts from "../../components/JavaScripts.astro";

// Base URL + assets
const SITE =
  (import.meta as any).env?.PUBLIC_SITE_URL ||
  (Astro.site ? String(Astro.site) : "");

const ASSET_BASE =
  (((import.meta as any).env?.PUBLIC_ASSET_BASE as string) || "/_assets_").replace(/\/$/, "");

const canonical = SITE
  ? new URL(Astro.url.pathname, SITE).toString()
  : Astro.url.toString();

const seo = {
  title: "Services Webmarketing Sud Oise & Nord 95 | SEO local, Google Ads, CRO",
  description:
    "Découvrez mes services webmarketing dans le Sud de l’Oise (60) et le Nord Val-d’Oise (95) : SEO local (Google Maps), Google Ads, CRO, Analytics/Tracking, contenu SEO.",
};

const contact = {
  phoneDisplay: "06 60 92 10 08",
  phoneHref: "+33660921008",
  email: "contact@horizon-conversion.fr",
  linkedin: "#",
  instagram: "#",
};

const pageTitle = {
  badge: "Services Webmarketing",
  h1: "Services SEO, Google Ads & CRO",
  breadcrumb: [
    { label: "Accueil", href: "/" },
    { label: "Services", href: "/services/" },
  ],
};

const cardIntro = {
  badge: "Objectif : Leads",
  title: "Une stratégie simple : attirer, mesurer, convertir.",
  text:
    "Je vous aide à générer des demandes qualifiées dans le Sud de l’Oise (60) et le Nord 95 : visibilité Google (SEO local), acquisition immédiate (Google Ads) et optimisation du site (CRO).",
  cta: { label: "Demander un audit", href: "/contact/" },
  kpiLabel: "Performance moyenne observée",
  kpiValue: "+30 à +80% de leads",
  chartLabels: ["S1", "S2", "S3", "S4", "S5", "S6"],
  chartData: [20, 32, 28, 44, 40, 58],
};

const roadmapIntro = {
  badge: "Méthode",
  title: "Ce que je fais (et dans quel ordre)",
  text:
    "On commence par ce qui a le plus d’impact : tracking & messages, puis visibilité locale et campagnes. Chaque action vise une métrique : appels, formulaires, devis.",
  roadmapTitle: "Ma roadmap (en 4 étapes)",
};

const roadmap = [
  {
    date: "Semaine 1",
    title: "Audit & priorités",
    text:
      "Analyse rapide : visibilité Google (Maps), pages qui convertissent, concurrence locale, tracking. On définit 3 priorités actionnables.",
  },
  {
    date: "Semaines 2–3",
    title: "Fondations conversion",
    text:
      "Optimisation des pages clés (CTA, preuves, friction), formulaire, vitesse, mobile. Mise en place du tracking (GA4/GTM/UTM).",
  },
  {
    date: "Semaines 3–6",
    title: "SEO local & contenus",
    stat: { from: 2, to: 35, suffix: "%", label: "hausse de visibilité locale" },
    text:
      "Google Business Profile + pages “ville + service” + FAQ + avis : on gagne des positions et des clics qualifiés.",
  },
  {
    date: "En continu",
    title: "Acquisition & optimisation",
    stat: { from: 20, to: 120, suffix: "+", label: "leads pilotés / mois" },
    text:
      "Google Ads si pertinent, retargeting, tests A/B simples. On améliore le coût par lead et la qualité des demandes.",
  },
];

const serviceCards = [
  {
    href: "/services/seo-local/",
    img: `${ASSET_BASE}/images/services/seo.svg`,
    imgAlt: "SEO local Oise Nord 95",
    title: "SEO local (Oise / Nord 95)",
    desc:
      "Se positionner sur Google Maps et sur les requêtes “plombier Senlis”, “cabinet médical Chantilly”, “devis + ville”.",
    bullets: [
      "Google Business Profile (optimisation & posts)",
      "Pages villes + services (maillage interne)",
      "Avis clients & e-réputation",
      "Vitesse & technique (Core Web Vitals)",
      "Suivi positions & appels",
    ],
  },
  {
    href: "/services/social/",
    img: `${ASSET_BASE}/images/services/social.svg`,
    imgAlt: "Social media et retargeting",
    title: "Social & retargeting (orienté demandes)",
    desc:
      "Pas du “contenu pour du contenu” : on nourrit le SEO et on relance les visiteurs pour déclencher le contact.",
    bullets: [
      "Calendrier éditorial utile (preuves, cas, FAQ)",
      "Retargeting Meta / Google (visiteurs)",
      "Créa simple, orientée conversion",
      "Tracking UTM + événements",
      "Messages & offres locales",
    ],
  },
  {
    href: "/services/google-ads/",
    img: `${ASSET_BASE}/images/services/adwords.svg`,
    imgAlt: "Google Ads Oise Nord 95",
    title: "Google Ads (Search) : leads rapides",
    desc:
      "Idéal si vous voulez des demandes dès cette semaine : on pilote à l’intention et on coupe le gaspillage.",
    bullets: [
      "Structure campagnes (Search) + extensions",
      "Mots-clés intention + exclusions",
      "Annonces orientées devis/appel",
      "Landing pages dédiées",
      "Optimisation coût par lead",
      "Suivi appels & formulaires",
    ],
  },
  {
    href: "/services/analytics/",
    img: `${ASSET_BASE}/images/services/analysis.svg`,
    imgAlt: "Analytics GA4 GTM tracking",
    title: "Analytics & tracking (GA4 / GTM)",
    desc:
      "Sans tracking fiable, on pilote à l’intuition. On mesure ce qui compte : appels, formulaires, devis, ventes.",
    bullets: [
      "GA4 + Google Tag Manager",
      "Événements (clic tel, formulaire, WhatsApp…)",
      "UTM automatique & sources",
      "Tableau de bord simple",
      "Attribution & qualité des leads",
    ],
  },
  {
    href: "/services/cro/",
    img: `${ASSET_BASE}/images/services/experience.svg`,
    imgAlt: "CRO optimisation conversion",
    title: "CRO : optimisation du taux de conversion",
    desc:
      "Votre site doit transformer le trafic en demandes : on réduit la friction et on renforce la confiance.",
    bullets: [
      "Audit UX (mobile-first)",
      "Amélioration CTA, preuves, pages services",
      "Formulaires (plus simples, plus efficaces)",
      "A/B tests “light” (sans usine à gaz)",
      "Amélioration taux de conversion",
    ],
  },
  {
    href: "/services/contenu-seo/",
    img: `${ASSET_BASE}/images/services/content_marketing.svg`,
    imgAlt: "Contenu SEO local",
    title: "Contenu SEO local (pages & blog)",
    desc:
      "Construire une visibilité durable : pages services, pages villes, FAQ, contenus qui répondent aux recherches locales.",
    bullets: [
      "Pages “service + ville” (silo/local)",
      "FAQ & schémas (rich results)",
      "Briefs & contenus orientés conversion",
      "Maillage interne & navigation",
      "Optimisation titles/meta",
    ],
  },
];

const promo = {
  kicker: "Audit gratuit • Sud Oise & Nord 95",
  title:
    "On identifie les 3 actions qui génèrent le plus de demandes en 30 jours.",
  highlight: "Horizon Conversion",
  cta: { label: "Me contacter", href: "/contact/" },
};

// JSON-LD (Service)
const jsonLd = {
  "@context": "https://schema.org",
  "@type": "CollectionPage",
  name: "Services Webmarketing Sud Oise & Nord 95",
  url: canonical,
  about: ["SEO local", "Google Ads", "CRO", "Analytics", "Contenu SEO"],
  inLanguage: "fr-FR",
};

// Data for inline script via define:vars (Astro-safe)
const chartLabels = cardIntro.chartLabels;
const chartData = cardIntro.chartData;

---

<!doctype html>
<html dir="ltr" lang="fr-FR">
  <Head {seo} {canonical} {jsonLd} />
  <body class="stretched">
    <div id="wrapper">
      <TopBar {contact} ASSET_BASE={ASSET_BASE} />
      <Header {contact} ASSET_BASE={ASSET_BASE} />

      <!-- Page Title -->
      <section
        class="page-title page-title-parallax parallax scroll-detect page-title-center dark include-header include-topbar"
        style="padding-bottom: 140px;"
      >
        <img
          src={`${ASSET_BASE}/images/about-title.jpg`}
          class="parallax-bg"
          alt="Services webmarketing Oise et Nord 95"
        />
        <div id="particles-line"></div>

        <div class="container position-relative">
          <div class="page-title-row">
            <div class="page-title-content">
              <div class="badge rounded-pill border border-light text-light">
                {pageTitle.badge}
              </div>
              <h1>{pageTitle.h1}</h1>
              <p class="mb-0 mt-3">
                Zone : <strong>Sud Oise (60)</strong> &amp;
                <strong>Nord Val-d’Oise (95)</strong> — Senlis, Chantilly, Creil,
                Compiègne, Luzarches, L’Isle-Adam…
              </p>
            </div>

            <nav aria-label="breadcrumb">
              <ol class="breadcrumb">
                {pageTitle.breadcrumb.map((b, idx) => (
                  <li
                    class={`breadcrumb-item ${
                      idx === pageTitle.breadcrumb.length - 1 ? "active" : ""
                    }`}
                    aria-current={
                      idx === pageTitle.breadcrumb.length - 1 ? "page" : undefined
                    }
                  >
                    {idx === pageTitle.breadcrumb.length - 1 ? (
                      b.label
                    ) : (
                      <a href={b.href}>{b.label}</a>
                    )}
                  </li>
                ))}
              </ol>
            </nav>
          </div>
        </div>

        <div
          class="video-overlay z-1"
          style="background-image: linear-gradient(to top, rgba(254,150,3,0.5), #39384D);"
        ></div>
      </section>

      <!-- Content -->
      <section id="content">
        <div class="content-wrap py-0 overflow-visible">
          <!-- KPI Card -->
          <div class="card mx-auto mw-md border-0 shadow rounded-4 card-seo-about mb-5 mb-lg-0">
            <div class="card-body p-5">
              <div class="row align-items-center">
                <div class="col-md-6">
                  <div class="heading-block border-bottom-0 mb-0">
                    <div class="badge rounded-pill badge-default">
                      {cardIntro.badge}
                    </div>
                    <h2 class="text-transform-none ls-0 mb-3">
                      {cardIntro.title}
                    </h2>
                    <p>{cardIntro.text}</p>
                    <a
                      href={cardIntro.cta.href}
                      class="button button-rounded text-capitalize m-0 ls-0"
                    >
                      {cardIntro.cta.label}
                    </a>

                    <div class="mt-4 small text-muted">
                      Requêtes visées : <strong>consultant SEO Oise</strong>,{" "}
                      <strong>SEO local Oise</strong>,{" "}
                      <strong>Google Ads Oise</strong>,{" "}
                      <strong>consultant webmarketing Val-d’Oise</strong>,{" "}
                      <strong>optimisation conversion CRO</strong>.
                    </div>
                  </div>
                </div>

                <div class="col-md-6">
                  <p class="text-end text-muted text-smaller">
                    {cardIntro.kpiLabel}:{" "}
                    <span class="text-success fw-bold text-larger">
                      {cardIntro.kpiValue}
                    </span>
                  </p>
                  <canvas id="chart-0"></canvas>
                </div>
              </div>
            </div>
          </div>

          <!-- Roadmap -->
          <div class="section bg-transparent m-0 pt-3 pb-0">
            <div class="container mw-md">
              <div
                class="heading-block border-bottom-0 text-center mx-auto"
                style="max-width: 650px"
              >
                <div class="badge rounded-pill badge-default">
                  {roadmapIntro.badge}
                </div>
                <h2 class="text-transform-none ls-0 mb-3">
                  {roadmapIntro.title}
                </h2>
                <p>{roadmapIntro.text}</p>
              </div>

              <div class="text-md-center">
                <h3 class="bg-color d-inline-block px-4 py-2 text-white mb-0 rounded-1">
                  {roadmapIntro.roadmapTitle}
                </h3>
              </div>

              <div class="story-timeline">
                <div class="clear mt-4"></div>
                <div class="story-timeline-line"></div>

                {roadmap.map((r, i) => {
                  const right = i % 2 === 1;
                  return (
                    <>
                      <div class="row justify-content-md-center">
                        <div class={right ? "col-md-5 order-md-2" : "col-md-5 text-md-end"}>
                          <h4 class="bg-secondary d-inline-block px-3 py-1 text-white mb-0 rounded-1 mb-3">
                            {r.date}
                          </h4>
                        </div>

                        <div class="story-timeline-dots"></div>

                        <div class={right ? "col-md-5 text-md-end" : "col-md-5"}>
                          <h3 class="mb-3">
                            {r.stat ? (
                              <span class="counter counter-inherit text-dark">
                                <span
                                  data-from={r.stat.from}
                                  data-to={r.stat.to}
                                  data-refresh-interval="10"
                                  data-speed="2000"
                                ></span>
                                {r.stat.suffix} {r.stat.label}
                              </span>
                            ) : (
                              r.title
                            )}
                            {!r.stat ? null : <span class="d-block mt-2">{r.title}</span>}
                          </h3>
                          {r.text}
                        </div>
                      </div>

                      {i < roadmap.length - 1 ? (
                        <div class="clear my-5"></div>
                      ) : (
                        <div class="clear mt-5"></div>
                      )}
                    </>
                  );
                })}
              </div>
            </div>
          </div>

          <!-- Service Cards -->
          <div class="section bg-transparent">
            <div class="container">
              <div class="row col-mb-30 align-content-stretch">
                {serviceCards.map((s) => (
                  <div class="col-lg-4 col-md-6 d-flex">
                    <a href={s.href} class="card h-shadow h-translate-y-sm all-ts">
                      <div class="card-body p-5">
                        <div class="feature-box flex-column">
                          <div class="fbox-image mb-5 text-center">
                            <img height="150" src={s.img} alt={s.imgAlt} />
                          </div>
                          <div class="fbox-content">
                            <h2 class="h3 text-transform-none ls-0 text-larger">{s.title}</h2>
                            <p class="text-smaller">{s.desc}</p>
                          </div>
                          <ul class="iconlist ms-3 mt-4 mb-0">
                            {s.bullets.map((b, idx) => (
                              <li class={`mb-2 text-muted ${idx === s.bullets.length - 1 ? "mb-0" : ""}`}>
                                <i class="fa-solid fa-check text-smaller color"></i> {b}
                              </li>
                            ))}
                          </ul>
                        </div>
                      </div>
                    </a>
                  </div>
                ))}
              </div>
            </div>
          </div>

          <Testimonials />

          <!-- Promo/Contact -->
                <div
                  class="section mt-5"
                  style={{
                    padding: "100px 0",
                    overflow: "visible",
                    background: `url(${ASSET_BASE}/images/sections/3.jpg) no-repeat top center`,
                    backgroundSize: "cover",
                  }}
                >
                  <div class="container">
                    <div class="heading-block border-bottom-0 text-center mx-auto" style="max-width: 950px;">
                      <div class="h6 text-uppercase ls-1 mb-1">{promo.kicker}</div>
                      <h2 class="text-transform-none ls-0">
                        {promo.title} <span>{promo.highlight}</span>
                      </h2>
                      <a
                        href={promo.cta.href}
                        class="button button-large button-rounded text-transform-none ms-0 ls-0 mt-4"
                      >
                        {promo.cta.label}
                      </a>
                    </div>
                  </div>
                </div>

                <Footer {contact} ASSET_BASE={ASSET_BASE} />
              </div>

    <div id="gotoTop" class="uil uil-angle-up"></div>
    <JavaScripts ASSET_BASE={ASSET_BASE} />

    <!-- Charts JS -->
    <script is:inline src={`${ASSET_BASE}/js/chart.js`}></script>
    <script is:inline src={`${ASSET_BASE}/js/chart-utils.js`}></script>

    <!-- Particles -->
    <script is:inline src={`${ASSET_BASE}/js/particles/particles.min.js`}></script>
    <script is:inline src={`${ASSET_BASE}/js/particles/particles-line.js`}></script>

    <!-- Chart init (Astro-safe via define:vars) -->
    <script is:inline define:vars={{ chartLabels, chartData }}>
      var chart = document.getElementById("chart-0").getContext("2d"),
        gradient = chart.createLinearGradient(0, 0, 0, 300);

      gradient.addColorStop(0, "rgba(254,150,3, .5)");
      gradient.addColorStop(0.5, "rgba(254,150,3, 0)");
      gradient.addColorStop(1, "rgba(254,150,3, 0)");

      var data = {
        labels: chartLabels,
        datasets: [
          {
            label: "Leads",
            backgroundColor: gradient,
            pointBackgroundColor: "white",
            borderWidth: 2,
            borderColor: "#fE9603",
            pointRadius: 3,
            pointHoverRadius: 3,
            pointHoverBorderWidth: 3,
            fill: true,
            data: chartData,
          },
        ],
      };

      var options = {
        responsive: true,
        maintainAspectRatio: true,
        scales: {
          xAxes: [
            {
              gridLines: {
                color: "rgba(200, 200, 200, 0.05)",
                lineWidth: 1,
                display: false,
              },
            },
          ],
          yAxes: [
            {
              display: false,
              scaleLabel: { display: false, labelString: "Value" },
            },
          ],
        },
        elements: { line: { tension: 0.4 } },
        legend: { display: false },
        point: { backgroundColor: "white", display: false },
        tooltips: {
          mode: "index",
          intersect: false,
          titleFontFamily: "Poppins",
          backgroundColor: "rgba(0,0,0,0.7)",
          titleFontColor: "#FFF",
          caretSize: 5,
          cornerRadius: 2,
          xPadding: 10,
          yPadding: 10,
        },
      };

      new Chart(chart, { type: "line", data: data, options: options });
    </script>
  </body>
</html>