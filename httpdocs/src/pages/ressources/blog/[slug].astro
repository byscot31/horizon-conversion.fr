---
// src/pages/ressources/blog/[slug].astro
import Layout from "../../../layouts/Layout.astro";
import MiniDevis from "../../../components/MiniDevis.astro";

// 1. D√âFINIR tous les articles disponibles
export async function getStaticPaths() {
  const articles = [
    {
      slug: "seo-local-artisans-2025",
      titre: "SEO local pour artisans : le guide complet 2025",
      date: "2025-02-15",
      auteur: "Julien",
      categorie: "Guide",
      image: "/images/ressources/seo-artisans.jpg",
      tempsLecture: 8,
      description: "Comment √™tre trouv√© quand un client cherche un plombier, √©lectricien ou menuisier dans votre ville.",
      contenu: `
        <h2>Pourquoi le SEO local est crucial pour les artisans</h2>
        <p>Quand un client a une fuite d'eau ou une panne d'√©lectricit√©, il ne va pas comparer les prix pendant 3 jours. Il prend son t√©l√©phone et tape "plombier urgence" ou "√©lectricien pr√®s de chez moi".</p>
        <p>Si vous n'apparaissez pas dans les premiers r√©sultats, vous perdez ce client.</p>
        
        <h2>Les 3 piliers du SEO local pour artisans</h2>
        
        <h3>1. Google My Business</h3>
        <p>Votre fiche Google est devenue plus importante que votre site. C'est la premi√®re chose que voient vos clients.</p>
        <ul>
          <li>Photos professionnelles de vos r√©alisations</li>
          <li>Avis clients (demandez syst√©matiquement)</li>
          <li>Horaires √† jour (surtout pour les urgences)</li>
          <li>Posts r√©guliers sur vos services</li>
        </ul>
        
        <h3>2. Les pages par service</h3>
        <p>Ne faites pas une seule page "plomberie". Cr√©ez des pages sp√©cifiques :</p>
        <ul>
          <li>D√©pannage urgence</li>
          <li>Installation chaudi√®re</li>
          <li>R√©paration fuite d'eau</li>
          <li>D√©bouchage canalisation</li>
        </ul>
        
        <h3>3. Les pages par ville</h3>
        <p>Si vous intervenez dans plusieurs communes, cr√©ez des pages d√©di√©es. Exemple :</p>
        <ul>
          <li>Plombier M√©ru</li>
          <li>Plombier Chambly</li>
          <li>Plombier Esches</li>
        </ul>
        
        <h2>Exemple concret : Robert, plombier √† M√©ru</h2>
        <p>Robert avait un site vieux de 10 ans et ne recevait que 2 appels par semaine. Apr√®s optimisation de sa fiche Google et cr√©ation de pages par service, il re√ßoit maintenant 15 appels par semaine.</p>
        <p><a href="/etudes-de-cas/plombier-meru">Voir l'√©tude de cas compl√®te ‚Üí</a></p>
      `
    },
    {
      slug: "google-ads-petits-budgets",
      titre: "Google Ads avec petit budget : 5 strat√©gies qui marchent",
      date: "2025-02-10",
      auteur: "Julien",
      categorie: "Strat√©gie",
      image: "/images/ressources/ads-budget.jpg",
      tempsLecture: 6,
      description: "Comment faire des annonces rentables avec moins de 300‚Ç¨ par mois pour un commerce local.",
      contenu: `
        <h2>1. La g√©olocalisation fine</h2>
        <p>Avec un petit budget, vous devez √™tre hyper-cibl√©. Ne diffusez pas sur tout le d√©partement, concentrez-vous sur un rayon de 5-10km autour de votre commerce.</p>
        
        <h2>2. Les heures de diffusion</h2>
        <p>Diffusez uniquement aux heures o√π vous pouvez r√©pondre. Si vous fermez √† 19h, arr√™tez les annonces √† 18h.</p>
        
        <h2>3. Les mots-cl√©s n√©gatifs</h2>
        <p>Excluez les recherches qui ne rapportent pas. Pour un plombier, excluez "cours plomberie", "formation", "prix", etc.</p>
        
        <h2>4. Les annonces saisonni√®res</h2>
        <p>Adaptez vos annonces aux p√©riodes : "chauffage" en hiver, "climatisation" en √©t√©, "cadeaux" en d√©cembre.</p>
        
        <h2>5. Le retargeting l√©ger</h2>
        <p>Remarquez les visiteurs de votre site avec des annonces √† petit budget. Le ROI est souvent excellent.</p>
      `
    },
    {
      slug: "avis-google-importance",
      titre: "Pourquoi les avis Google sont devenus plus importants que votre site",
      date: "2025-02-05",
      auteur: "Julien",
      categorie: "E-r√©putation",
      image: "/images/ressources/avis-google.jpg",
      tempsLecture: 5,
      description: "L'impact des avis sur le classement local et comment obtenir plus d'avis naturellement.",
      contenu: `
        <h2>1. Les avis influencent directement votre classement</h2>
        <p>Google consid√®re la quantit√©, la qualit√© et la r√©cence des avis comme des facteurs de classement majeurs. Plus vous avez d'avis r√©cents et positifs, plus vous montez.</p>
        
        <h2>2. Les avis rassurent les clients</h2>
        <p>Un client qui h√©site entre deux prestataires va regarder les avis. 84% des gens font autant confiance aux avis en ligne qu'√† une recommandation personnelle.</p>
        
        <h2>3. Comment obtenir plus d'avis</h2>
        <ul>
          <li>Demandez syst√©matiquement aux clients satisfaits</li>
          <li>Cr√©ez un lien direct vers votre fiche Google</li>
          <li>Formez vos √©quipes √† demander des avis</li>
          <li>R√©pondez √† tous les avis (positifs et n√©gatifs)</li>
        </ul>
        
        <h2>4. Exemple de Sophie, caviste √† Cergy</h2>
        <p>Sophie a gagn√© 30% de clients en boutique apr√®s avoir optimis√© sa fiche Google et obtenu 50 nouveaux avis.</p>
      `
    },
    {
      slug: "cro-pour-professions-liberales",
      titre: "CRO pour professions lib√©rales : transformer les visites en rendez-vous",
      date: "2025-01-28",
      auteur: "Julien",
      categorie: "Guide",
      image: "/images/ressources/cro-pro.jpg",
      tempsLecture: 7,
      description: "Techniques sp√©cifiques pour avocats, m√©decins et architectes qui veulent plus de clients.",
      contenu: `
        <h2>Le probl√®me des sites de professionnels lib√©raux</h2>
        <p>Beaucoup de sites d'avocats, m√©decins ou architectes re√ßoivent des visites... mais pas de rendez-vous. Le probl√®me n'est pas le trafic, c'est la conversion.</p>
        
        <h2>1. Le formulaire de contact id√©al</h2>
        <ul>
          <li>4 champs maximum</li>
          <li>Mention "r√©ponse sous 24h"</li>
          <li>Badge de confiance</li>
        </ul>
        
        <h2>2. Les t√©moignages clients</h2>
        <p>Placez des t√©moignages STRAT√âGIQUEMENT, pas cach√©s en bas de page.</p>
        
        <h2>3. Exemple concret</h2>
        <p>Ma√Ætre Dupont, avocat √† Montmorency, a doubl√© ses rendez-vous sans changer ses annonces, juste en optimisant son formulaire.</p>
      `
    },
    {
      slug: "referencement-local-google-maps",
      titre: "Google Maps : le guide pour √™tre dans le pack local",
      date: "2025-01-20",
      auteur: "Julien",
      categorie: "SEO local",
      image: "/images/ressources/google-maps.jpg",
      tempsLecture: 9,
      description: "Les 12 actions concr√®tes pour appara√Ætre dans les 3 premiers r√©sultats avec carte.",
      contenu: `
        <h2>Les 3 facteurs cl√©s du pack local</h2>
        
        <h3>1. La pertinence</h3>
        <p>Votre fiche doit correspondre exactement √† ce que cherche l'utilisateur. Utilisez les bonnes cat√©gories.</p>
        
        <h3>2. La distance</h3>
        <p>Google privil√©gie les commerces proches du lieu de recherche.</p>
        
        <h3>3. La notori√©t√©</h3>
        <p>Avis, liens, mentions : tout ce qui prouve que vous √™tes connu.</p>
        
        <h2>12 actions concr√®tes</h2>
        <ol>
          <li>Cat√©gorie principale pr√©cise</li>
          <li>Cat√©gories secondaires</li>
          <li>Photos de qualit√© (minimum 10)</li>
          <li>Horaires complets</li>
          <li>Messagerie activ√©e</li>
          <li>Questions/r√©ponses</li>
          <li>Posts r√©guliers</li>
          <li>Avis (demandez !)</li>
          <li>R√©ponses aux avis</li>
          <li>Lien vers votre site</li>
          <li>Num√©ro de t√©l√©phone local</li>
          <li>Produits/services list√©s</li>
        </ol>
      `
    },
    {
      slug: "prix-seo-local-2025",
      titre: "Combien co√ªte vraiment le SEO local en 2025 ?",
      date: "2025-01-12",
      auteur: "Julien",
      categorie: "Conseils",
      image: "/images/ressources/prix-seo.jpg",
      tempsLecture: 6,
      description: "Analyse des prix du march√© et ce que vous devez vraiment payer pour des r√©sultats.",
      contenu: `
        <h2>Les fourchettes de prix sur le march√©</h2>
        <ul>
          <li>Freelance d√©butant : 300-600‚Ç¨/mois</li>
          <li>Consultant confirm√© : 600-1200‚Ç¨/mois</li>
          <li>Agence locale : 1000-2000‚Ç¨/mois</li>
          <li>Grande agence : 2000-5000‚Ç¨/mois</li>
        </ul>
        
        <h2>Ce qui justifie le prix</h2>
        <ul>
          <li>Audit initial (temps d'analyse)</li>
          <li>Cr√©ation de contenu (r√©daction)</li>
          <li>Netlinking (liens)</li>
          <li>Suivi et reporting</li>
        </ul>
        
        <h2>Mon approche</h2>
        <p>Je propose des forfaits √† partir de 790‚Ç¨/mois pour un accompagnement complet, avec un engagement sans contrainte.</p>
        
        <h2>Attention aux arnaques</h2>
        <p>M√©fiez-vous des promesses de #1 en 15 jours et des tarifs trop bas. Le SEO demande du temps et du travail.</p>
      `
    }
  ];

  return articles.map((article) => ({
    params: { slug: article.slug },
    props: { article }
  }));
}

// 2. R√©cup√©rer les props
const { article } = Astro.props;

// 3. Articles similaires (pour la fin de page)
const articlesSimilaires = [
  {
    slug: "avis-google-importance",
    titre: "Pourquoi les avis Google sont devenus plus importants que votre site"
  },
  {
    slug: "cro-pour-professions-liberales",
    titre: "CRO pour professions lib√©rales : transformer les visites en rendez-vous"
  }
];
---

<Layout title={`${article.titre} | Horizon Conversion`} description={article.description}>
  {article ? (
      <div class="container-custom py-12 max-w-3xl">
        <!-- Fil d'ariane -->
        <nav class="text-sm text-gray-600 mb-8">
          <a href="/" class="hover:text-primary-600">Accueil</a> ‚Ä∫
          <a href="/ressources" class="hover:text-primary-600">Ressources</a> ‚Ä∫
          <a href="/ressources/blog" class="hover:text-primary-600">Blog</a> ‚Ä∫
          <span class="text-gray-900">{article.titre}</span>
        </nav>

        <!-- En-t√™te -->
        <div class="mb-8">
          <div class="flex items-center gap-3 mb-4">
            <span class="bg-primary-100 text-primary-700 px-3 py-1 rounded-full text-xs">{article.categorie}</span>
            <span class="text-sm text-gray-500">{new Date(article.date).toLocaleDateString('fr-FR')}</span>
            <span class="text-sm text-gray-500">Par {article.auteur}</span>
            <span class="text-sm text-gray-500">{article.tempsLecture} min de lecture</span>
          </div>
          <h1 class="text-4xl font-bold mb-6">{article.titre}</h1>
        </div>

        <!-- Image -->
        <div class="aspect-video bg-gray-100 rounded-xl mb-8 overflow-hidden">
          <img src={article.image} alt={article.titre} class="w-full h-full object-cover" onerror="this.src='https://placehold.co/1200x630/2563eb/white?text=Article'">
        </div>

        <!-- Contenu -->
        <div class="prose prose-lg max-w-none" set:html={article.contenu} />

        <!-- Auteur -->
        <div class="bg-gray-50 p-6 rounded-xl mt-12 flex items-start gap-4">
          <div class="w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center text-2xl">
            üë§
          </div>
          <div>
            <h3 class="font-bold text-lg mb-1">Julien</h3>
            <p class="text-gray-600 text-sm mb-2">Consultant SEO local dans l'Oise et le Val-d'Oise depuis 2015.</p>
            <a href="/contact" class="text-primary-600 text-sm hover:underline">Contacter ‚Üí</a>
          </div>
        </div>

        <!-- MINI-DEVIS ESTIMATEUR (NOUVEAU) -->
        <section class="py-12 bg-white">
          <div class="container-custom">
            <MiniDevis />
          </div>
        </section>

        <!-- Articles similaires -->
        <div class="border-t mt-12 pt-8">
          <h3 class="text-xl font-bold mb-6">Vous aimerez aussi</h3>
          <div class="grid md:grid-cols-2 gap-4">
            {articlesSimilaires.map(articleSim => (
                <a href={`/ressources/blog/${articleSim.slug}`} class="flex items-center gap-3 p-3 hover:bg-gray-50 rounded-lg">
                  <div class="w-12 h-12 bg-gray-100 rounded"></div>
                  <div>
                    <p class="font-medium">{articleSim.titre}</p>
                    <p class="text-xs text-gray-500">Lire l'article ‚Üí</p>
                  </div>
                </a>
            ))}
          </div>
        </div>

        <!-- CTA -->
        <div class="bg-primary-50 p-8 rounded-xl mt-8">
          <h3 class="text-xl font-bold mb-2">Vous voulez appliquer ces conseils ?</h3>
          <p class="text-gray-700 mb-4">Je propose un audit gratuit pour analyser votre situation.</p>
          <a href="/contact" class="btn-primary inline-block">Demander mon audit gratuit</a>
        </div>
      </div>
  ) : (
      <div class="container-custom py-16 text-center">
        <h1 class="text-3xl font-bold mb-4">Article non trouv√©</h1>
        <a href="/ressources/blog" class="text-primary-600">Voir tous les articles ‚Üí</a>
      </div>
  )}
</Layout>