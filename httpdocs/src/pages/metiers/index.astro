---
// src/pages/metiers/index.astro
import Layout from "../../layouts/Layout.astro";
import metiers from "../../data/metiers.json";
import services from "../../data/services.json";
import villes from "../../data/villes.json";

// Statistiques
const totalClients = 82;
const totalVilles = villes.length;
const totalServices = services.length;

// Mapping des r√©sultats par m√©tier
const resultatsParMetier = {
  artisans: [
    { nom: "Robert", entreprise: "Plomberie Martin", ville: "M√©ru", resultat: "+650% d'appels", etude: "plombier-meru" },
    { nom: "Jean-Claude", entreprise: "Lefebvre √âlectricit√©", ville: "Beauvais", resultat: "+400% de visibilit√©", etude: "electricien-beauvais" },
    { nom: "Michel", entreprise: "Menuiserie Dubois", ville: "Chambly", resultat: "+500% de devis", etude: "menuisier-chambly" }
  ],
  commerces: [
    { nom: "Sophie", entreprise: "Cave des 3 Rois", ville: "Cergy", resultat: "+30% de clients", etude: "caviste-cergy" },
    { nom: "Isabelle", entreprise: "Coiffure Isabelle", ville: "Argenteuil", resultat: "+35% de clients", etude: "coiffeuse-argenteuil" },
    { nom: "C√©line", entreprise: "Fleuriste C√©line", ville: "Cergy", resultat: "+40% de CA", etude: "fleuriste-cergy" }
  ],
  "profession-liberale": [
    { nom: "Ma√Ætre Dupont", entreprise: "Cabinet Dupont", ville: "Montmorency", resultat: "+200% de rendez-vous", etude: "avocat-montmorency" },
    { nom: "Dr. Martin", entreprise: "M√©decine g√©n√©rale", ville: "Senlis", resultat: "+180% de rendez-vous", etude: "medecin-senlis" },
    { nom: "Claire", entreprise: "Atelier Architecture", ville: "Montmorency", resultat: "+200% de devis", etude: "architecte-montmorency" }
  ],
  "tpe-pme": [
    { nom: "Franck", entreprise: "Transports Moreau", ville: "Compi√®gne", resultat: "+150% de devis", etude: "transport-compiegne" },
    { nom: "Philippe", entreprise: "SARL BTP 60", ville: "Creil", resultat: "+300% de CA", etude: "macon-creil" },
    { nom: "Sylvie", entreprise: "Beauvais Nettoyage", ville: "Beauvais", resultat: "+250% contrats pros", etude: "nettoyage-beauvais" }
  ],
  "reseaux-franchise": [
    { nom: "Caroline", entreprise: "Boulangeries du Pain", ville: "Cergy", resultat: "+450 avis", etude: "franchise-cergy" }
  ],
  tourisme: [
    { nom: "Virginie", entreprise: "H√¥tel du Parc", ville: "Chantilly", resultat: "+80% r√©servations", etude: "hotel-chantilly" },
    { nom: "Pierre", entreprise: "Restaurant", ville: "Compi√®gne", resultat: "+200 couverts", etude: "restaurateur-compiegne" },
    { nom: "Sophie", entreprise: "G√Æte Les R√™ves d'√î", ville: "Senlis", resultat: "+80% r√©servations", etude: "gite-senlis" }
  ]
};

// Villes cl√©s par m√©tier
const villesParMetier = {
  artisans: ["M√©ru", "Beauvais", "Chambly", "Creil", "Noyon"],
  commerces: ["Cergy", "Argenteuil", "Compi√®gne", "Pontoise"],
  "profession-liberale": ["Montmorency", "Senlis", "Chantilly", "Beauvais"],
  "tpe-pme": ["Compi√®gne", "Creil", "Beauvais", "Noyon"],
  "reseaux-franchise": ["Cergy", "Pontoise", "Compi√®gne"],
  tourisme: ["Chantilly", "Compi√®gne", "Senlis", "Auvers-sur-Oise"]
};
---

<Layout
    title="M√©tiers accompagn√©s - Artisans, commerces, professions lib√©rales | Horizon Conversion"
    description="J'accompagne les artisans, commerces, professions lib√©rales, TPE/PME, r√©seaux et h√¥teliers dans l'Oise et le Val-d'Oise."
>

  <!-- Hero avec stats -->
  <section class="bg-gradient-to-br from-purple-50 to-pink-50 py-20">
    <div class="container-custom">
      <div class="max-w-4xl mx-auto text-center">
        <h1 class="text-5xl font-bold text-gray-900 mb-6">
          Vous √™tes <span class="text-primary-600">plut√¥t...</span>
        </h1>
        <p class="text-xl text-gray-700 mb-12 max-w-3xl mx-auto">
          Chaque m√©tier a ses sp√©cificit√©s, ses enjeux, ses clients. J'adapte ma strat√©gie √† votre activit√©.
        </p>

        <!-- Statistiques -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-6 max-w-3xl mx-auto">
          <div class="bg-white/80 backdrop-blur-sm p-4 rounded-xl">
            <div class="text-3xl font-bold text-primary-600">{metiers.length}</div>
            <div class="text-sm text-gray-600">m√©tiers</div>
          </div>
          <div class="bg-white/80 backdrop-blur-sm p-4 rounded-xl">
            <div class="text-3xl font-bold text-primary-600">{totalClients}+</div>
            <div class="text-sm text-gray-600">clients</div>
          </div>
          <div class="bg-white/80 backdrop-blur-sm p-4 rounded-xl">
            <div class="text-3xl font-bold text-primary-600">{totalVilles}</div>
            <div class="text-sm text-gray-600">villes</div>
          </div>
          <div class="bg-white/80 backdrop-blur-sm p-4 rounded-xl">
            <div class="text-3xl font-bold text-primary-600">{totalServices}</div>
            <div class="text-sm text-gray-600">services</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Grille des m√©tiers enrichie -->
  <section class="py-20">
    <div class="container-custom">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {metiers.map(metier => {
          const bgColor = {
            artisans: "bg-blue-50",
            commerces: "bg-green-50",
            "profession-liberale": "bg-purple-50",
            "tpe-pme": "bg-amber-50",
            "reseaux-franchise": "bg-indigo-50",
            tourisme: "bg-rose-50"
          }[metier.id] || "bg-gray-50";

          const villesMetier = villesParMetier[metier.id] || [];
          const resultats = resultatsParMetier[metier.id] || [];

          return (
              <div class="card group hover:shadow-xl transition-all overflow-hidden">
                <div class={`${bgColor} p-8 text-center relative overflow-hidden`}>
                  <div class="absolute top-0 right-0 w-24 h-24 bg-white/20 rounded-full -mt-8 -mr-8"></div>
                  <h2 class="text-2xl font-bold mb-2 group-hover:text-primary-600 transition-colors">
                    {metier.nom}
                  </h2>
                  <p class="text-gray-600 text-sm mb-4">{metier.description}</p>

                  <!-- Services rapides -->
                  <div class="flex flex-wrap justify-center gap-2 mb-4">
                    <span class="bg-white/80 text-xs px-2 py-1 rounded-full">SEO local</span>
                    <span class="bg-white/80 text-xs px-2 py-1 rounded-full">Google Ads</span>
                    <span class="bg-white/80 text-xs px-2 py-1 rounded-full">CRO</span>
                  </div>

                  <a href={`/metiers/${metier.id}`} class="inline-block bg-white px-6 py-2 rounded-full text-primary-600 font-medium hover:shadow-md transition-all">
                    D√©couvrir ‚Üí
                  </a>
                </div>

                <div class="p-6 bg-white">
                  <p class="text-gray-700 italic mb-4 text-sm">
                    "{metier.message?.replace('{ville}', 'votre ville')}"
                  </p>

                  <!-- Villes cl√©s -->
                  {villesMetier.length > 0 && (
                      <div class="mb-4">
                        <p class="text-xs font-semibold text-gray-500 mb-2">PR√âSENT √Ä :</p>
                        <div class="flex flex-wrap gap-1">
                          {villesMetier.slice(0, 3).map(ville => (
                              <span class="text-xs bg-gray-100 px-2 py-1 rounded-full">{ville}</span>
                          ))}
                          {villesMetier.length > 3 && (
                              <span class="text-xs text-gray-400">+{villesMetier.length - 3}</span>
                          )}
                        </div>
                      </div>
                  )}

                  <!-- R√©sultat cl√© -->
                  {resultats.length > 0 && (
                      <div class="mb-3">
                        <p class="text-xs font-semibold text-gray-500 mb-1">R√âSULTAT :</p>
                        <p class="text-sm font-bold text-green-600">{resultats[0].resultat}</p>
                      </div>
                  )}

                  <div class="flex justify-between items-center text-sm border-t pt-3">
                    <span class="text-gray-500">Urgence : {metier.urgence}</span>
                    <span class="text-primary-600 font-medium group-hover:translate-x-2 transition-transform inline-flex items-center gap-1">
                      En savoir plus ‚Üí
                    </span>
                  </div>
                </div>
              </div>
          );
        })}
      </div>
    </div>
  </section>

  <!-- Section : Les services par m√©tier -->
  <section class="bg-gray-50 py-20">
    <div class="container-custom">
      <h2 class="text-3xl font-bold text-center mb-4">Quels services <span class="text-primary-600">pour quel m√©tier</span> ?</h2>
      <p class="text-center text-gray-600 mb-12 max-w-2xl mx-auto">Chaque m√©tier a des besoins sp√©cifiques. Voici les services les plus adapt√©s.</p>

      <div class="grid md:grid-cols-3 gap-8 max-w-5xl mx-auto">
        <div class="bg-white p-6 rounded-xl shadow-sm">
          <div class="badge-consultant inline-block mb-3">Artisans</div>
          <h3 class="text-xl font-bold mb-3">Services cl√©s</h3>
          <ul class="space-y-2">
            <li><a href="/services/seo-local" class="text-primary-600 hover:underline">‚Üí SEO local</a> <span class="text-xs text-gray-500">(priorit√©)</span></li>
            <li><a href="/services/gmb" class="text-primary-600 hover:underline">‚Üí Fiche Google My Business</a></li>
            <li><a href="/services/creation-site" class="text-primary-600 hover:underline">‚Üí Cr√©ation de site</a></li>
          </ul>
        </div>

        <div class="bg-white p-6 rounded-xl shadow-sm">
          <div class="badge-agence inline-block mb-3">Commerces</div>
          <h3 class="text-xl font-bold mb-3">Services cl√©s</h3>
          <ul class="space-y-2">
            <li><a href="/services/google-ads" class="text-primary-600 hover:underline">‚Üí Google Ads</a> <span class="text-xs text-gray-500">(priorit√©)</span></li>
            <li><a href="/services/gmb" class="text-primary-600 hover:underline">‚Üí Fiche Google My Business</a></li>
            <li><a href="/services/seo-local" class="text-primary-600 hover:underline">‚Üí SEO local</a></li>
          </ul>
        </div>

        <div class="bg-white p-6 rounded-xl shadow-sm">
          <div class="badge-premium inline-block mb-3">Professions lib√©rales</div>
          <h3 class="text-xl font-bold mb-3">Services cl√©s</h3>
          <ul class="space-y-2">
            <li><a href="/services/cro" class="text-primary-600 hover:underline">‚Üí CRO</a> <span class="text-xs text-gray-500">(priorit√©)</span></li>
            <li><a href="/services/seo-local" class="text-primary-600 hover:underline">‚Üí SEO local</a></li>
            <li><a href="/services/formation" class="text-primary-600 hover:underline">‚Üí Formation</a></li>
          </ul>
        </div>
      </div>

      <div class="text-center mt-8">
        <a href="/services" class="text-primary-600 hover:underline font-medium">
          Voir tous les services ‚Üí
        </a>
      </div>
    </div>
  </section>

  <!-- Section : R√©sultats par m√©tier -->
  <section class="py-20">
    <div class="container-custom">
      <h2 class="text-3xl font-bold text-center mb-4">Des r√©sultats <span class="text-primary-600">par m√©tier</span></h2>
      <p class="text-center text-gray-600 mb-12 max-w-2xl mx-auto">D√©couvrez ce que nous avons accompli pour chaque secteur.</p>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {metiers.map(metier => {
          const premiersResultats = (resultatsParMetier[metier.id] || []).slice(0, 2);
          return (
              <div class="bg-white p-6 rounded-xl shadow-sm">
                <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
                  <span class="w-2 h-2 bg-primary-600 rounded-full"></span>
                  {metier.nom}
                </h3>
                <div class="space-y-4">
                  {premiersResultats.map((res, idx) => (
                      <div key={idx} class="border-l-2 border-primary-200 pl-3">
                        <p class="font-semibold">{res.nom}</p>
                        <p class="text-sm text-gray-600">{res.entreprise} ‚Ä¢ {res.ville}</p>
                        <p class="text-sm text-green-600 font-bold mt-1">{res.resultat}</p>
                        <a href={`/etudes-de-cas/${res.etude}`} class="text-xs text-primary-600 hover:underline">Voir l'√©tude ‚Üí</a>
                      </div>
                  ))}
                </div>
                <a href={`/etudes-de-cas?metier=${metier.id}`} class="inline-block mt-4 text-primary-600 text-sm hover:underline">
                  Voir tous les cas {metier.nomCourt} ‚Üí
                </a>
              </div>
          );
        })}
      </div>
    </div>
  </section>

  <!-- Section : Villes cl√©s par m√©tier -->
  <section class="bg-gray-50 py-16">
    <div class="container-custom">
      <h2 class="text-3xl font-bold text-center mb-4">Nos <span class="text-primary-600">villes d'intervention</span></h2>
      <p class="text-center text-gray-600 mb-12">Pr√©sents dans tout l'Oise et le Val-d'Oise.</p>

      <div class="grid md:grid-cols-3 gap-8">
        {metiers.map(metier => (
            <div>
              <h3 class="font-semibold text-lg mb-3 text-primary-600">
                {metier.id === 'artisans' && 'üîß Artisans'}
                {metier.id === 'commerces' && 'üõçÔ∏è Commerces'}
                {metier.id === 'profession-liberale' && '‚öñÔ∏è Professions lib√©rales'}
                {metier.id === 'tpe-pme' && 'üè≠ TPE/PME'}
                {metier.id === 'reseaux-franchise' && 'ü•ê R√©seaux & Franchises'}
                {metier.id === 'tourisme' && 'üè® Tourisme'}
              </h3>
              <div class="space-y-2">
                {(villesParMetier[metier.id] || []).map(ville => (
                    <a href={`/villes/${ville.toLowerCase()}`} class="block text-gray-700 hover:text-primary-600">
                      {ville}
                    </a>
                ))}
                <a href={`/metiers/${metier.id}`} class="block text-sm text-primary-600 mt-2 hover:underline">
                  Voir toutes les villes ‚Üí
                </a>
              </div>
            </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Section : Approche par m√©tier -->
  <section class="py-20">
    <div class="container-custom">
      <h2 class="text-3xl font-bold text-center mb-12">Mon approche selon votre m√©tier</h2>

      <div class="grid md:grid-cols-3 gap-8">
        <div class="bg-white p-6 rounded-xl shadow-sm hover:shadow-md transition-all">
          <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-4">
            <span class="text-blue-600 text-xl">üîß</span>
          </div>
          <div class="badge-consultant inline-block mb-3">Consultant</div>
          <h3 class="text-xl font-bold mb-2">Artisans & commerces</h3>
          <p class="text-gray-600 mb-4">Relation directe, expertise terrain, r√©activit√©. Je suis votre interlocuteur unique pour des r√©sultats rapides.</p>
          <a href="/metiers/artisans" class="text-primary-600 hover:underline">En savoir plus ‚Üí</a>
        </div>

        <div class="bg-white p-6 rounded-xl shadow-sm hover:shadow-md transition-all">
          <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mb-4">
            <span class="text-purple-600 text-xl">üè¢</span>
          </div>
          <div class="badge-agence inline-block mb-3">Agence</div>
          <h3 class="text-xl font-bold mb-2">PME, franchises</h3>
          <p class="text-gray-600 mb-4">Process structur√©s, reporting, outils pros. Une m√©thode d'agence sans les frais de structure.</p>
          <a href="/metiers/tpe-pme" class="text-primary-600 hover:underline">En savoir plus ‚Üí</a>
        </div>

        <div class="bg-white p-6 rounded-xl shadow-sm hover:shadow-md transition-all">
          <div class="w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center mb-4">
            <span class="text-amber-600 text-xl">‚öñÔ∏è</span>
          </div>
          <div class="badge-premium inline-block mb-3">Expert</div>
          <h3 class="text-xl font-bold mb-2">Professions lib√©rales</h3>
          <p class="text-gray-600 mb-4">Accompagnement sur-mesure, discr√©tion, expertise pointue pour une client√®le exigeante.</p>
          <a href="/metiers/profession-liberale" class="text-primary-600 hover:underline">En savoir plus ‚Üí</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Section : FAQ par m√©tier -->
  <section class="bg-gray-50 py-16">
    <div class="container-custom max-w-3xl">
      <h2 class="text-3xl font-bold text-center mb-8">Questions <span class="text-primary-600">fr√©quentes</span></h2>

      <div class="space-y-4">
        <details class="bg-white p-6 rounded-lg">
          <summary class="font-semibold cursor-pointer">Quel service est le plus adapt√© √† mon m√©tier ?</summary>
          <p class="mt-3 text-gray-600">Tout d√©pend de vos objectifs. Les artisans ont besoin de visibilit√© locale (SEO, GMB), les commerces de trafic imm√©diat (Google Ads), les professions lib√©rales de confiance et de conversion (CRO). Je vous conseille lors de l'audit gratuit.</p>
        </details>

        <details class="bg-white p-6 rounded-lg">
          <summary class="font-semibold cursor-pointer">Combien de clients avez-vous accompagn√©s dans mon m√©tier ?</summary>
          <p class="mt-3 text-gray-600">J'ai accompagn√© des dizaines de professionnels dans chaque secteur. Consultez les √©tudes de cas pour voir des exemples concrets.</p>
        </details>

        <details class="bg-white p-6 rounded-lg">
          <summary class="font-semibold cursor-pointer">Y a-t-il des sp√©cificit√©s pour mon m√©tier dans l'Oise/Val-d'Oise ?</summary>
          <p class="mt-3 text-gray-600">Oui, chaque territoire a ses propres dynamiques. Je connais parfaitement le tissu √©conomique local et les habitudes de recherche dans chaque ville.</p>
        </details>
      </div>

      <div class="text-center mt-8">
        <a href="/ressources/faq" class="text-primary-600 hover:underline">Voir toutes les FAQ ‚Üí</a>
      </div>
    </div>
  </section>

  <!-- CTA final -->
  <section class="bg-primary-600 text-white py-16">
    <div class="container-custom text-center">
      <h2 class="text-3xl font-bold mb-4">Pr√™t √† discuter de votre m√©tier ?</h2>
      <p class="text-xl mb-8 opacity-90 max-w-2xl mx-auto">
        Je propose un audit gratuit pour analyser votre situation et voir comment je peux vous aider.
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a href="/contact" class="bg-white text-primary-600 hover:bg-gray-100 px-8 py-4 rounded-full font-semibold text-lg transition-colors">
          Demander mon audit gratuit
        </a>
        <a href="tel:0660921008" class="bg-transparent border-2 border-white text-white hover:bg-white/10 px-8 py-4 rounded-full font-semibold text-lg transition-colors">
          üìû 06 60 92 10 08
        </a>
      </div>
    </div>
  </section>
</Layout>