---
// src/layouts/LayoutSEO.astro
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import Analytics from "../components/Analytics.astro";

const { title, description, canonical: canonicalProp, robots: robotsProp } = Astro.props;

const canonicalDefault = Astro.site
  ? new URL(Astro.url.pathname, Astro.site).toString()
  : new URL(Astro.url.pathname, Astro.url).toString();

const canonical = canonicalProp ?? canonicalDefault;

const robotsDefault =
  "index,follow,max-image-preview:large,max-snippet:-1,max-video-preview:-1";

const hasPersona = Astro.url.searchParams.has("persona");
const robots = robotsProp ?? (hasPersona ? "noindex,follow" : robotsDefault);
---

<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="author" content="Control Online">

  <title>{title}</title>
  <meta name="description" content={description} />
  <link rel="canonical" href={canonical} />

  <meta name="robots" content={robots} />

  <meta property="og:type" content="website" />
  <meta property="og:locale" content="fr_FR" />
  <meta property="og:title" content={title} />
  <meta property="og:description" content={description} />
  <meta property="og:url" content={canonical} />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content={title} />
  <meta name="twitter:description" content={description} />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;700&family=Chewy&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="/assets/style.css">
  <link rel="stylesheet" href="/assets/css/font-icons.css">
  <link rel="stylesheet" href="/assets/pet.css">


</head>

<body class="stretched">
<div id="wrapper">

  <Header />

  <slot />

  <Footer />

</div>

<div id="gotoTop" class="uil uil-angle-up"></div>

<script is:inline src="/assets/js/plugins.min.js"></script>
<script is:inline src="/assets/js/functions.bundle.js"></script>

<Analytics />

</body>
</html>
