---
// src/pages/zones/sud-oise-60/index.astro
import LayoutSEO from "../../../layouts/LayoutSEO.astro";
import { JOBS } from "../../../data/jobs.ts";
import { SERVICES } from "../../../data/services.ts";
import { ZONES, slugifyCity } from "../../../data/zones.ts";

const baseUrl = "https://animaux.horizon-conversion.fr";
const canonical = `${baseUrl}${Astro.url.pathname}`;

const zoneKey = "sud-oise-60" as const;
const zone = (ZONES as any)[zoneKey];
const zoneName = "Sud Oise (60)";

const title = `SEO local animaux ${zoneName} – Villes & stratégie locale | Horizon Conversion`;
const description =
  "Guide SEO local & Google Maps pour pros des animaux en Sud Oise (60) : communes prioritaires, déplacements, saisonnalité, preuves locales, pages métier×ville & service×ville.";

const breadcrumbs = [
  { name: "Accueil", item: `${baseUrl}/` },
  { name: "Zones", item: `${baseUrl}/zones/` },
  { name: zoneName, item: canonical },
];

const townsAll: string[] = zone?.towns ?? [
  "Chantilly","Senlis","Lamorlaye","Gouvieux","Creil","Nogent-sur-Oise","Pont-Sainte-Maxence","Clermont","Méru","Liancourt",
];

const coreTowns = ["Chantilly","Senlis","Lamorlaye","Gouvieux","Creil","Nogent-sur-Oise","Pont-Sainte-Maxence"];

const otherTowns = townsAll
  .filter((t) => !coreTowns.includes(t))
  .slice(0, 14)
  .map((t) => ({ name: t, href: `/zones/${slugifyCity(t)}/` }));

// ✅ liens métier×ville
const featuredJobSlugs = ["educateur-canin","toiletteur","pension-canine","comportementaliste","osteo-animalier","veterinaire"];
const featuredJobs = featuredJobSlugs
  .map((slug) => ({ slug, name: (JOBS as any)[slug]?.name as string | undefined }))
  .filter((x) => x.name);

const moneyMetierPages = coreTowns.slice(0, 6).flatMap((town) =>
  featuredJobs.slice(0, 4).map((j) => ({
    town,
    jobName: j.name!,
    href: `/zones/${slugifyCity(town)}/${j.slug}/`,
  }))
);

// ✅ liens service×ville (nouveau)
const serviceEntries = Object.entries(SERVICES) as Array<[string, any]>;
const moneyServicePages = coreTowns.slice(0, 6).flatMap((town) =>
  serviceEntries.slice(0, 4).map(([serviceSlug, s]) => ({
    town,
    serviceName: s.name as string,
    href: `/zones/${slugifyCity(town)}/services/${serviceSlug}/`,
  }))
);

// ✅ preuves locales (mini cas anonymisé)
const localProof = {
  title: "Mini cas (anonymisé) — Toiletteur (Sud Oise)",
  context:
    "Objectif : remplir des créneaux semaine + réduire les demandes hors zone. Mise en place : page locale dédiée + Ads Search + tracking appels/form.",
  beforeAfter: [
    { label: "CTR Ads", before: "2,4%", after: "5,1%" },
    { label: "Conv. landing", before: "3,2%", after: "6,0%" },
    { label: "Appels / semaine", before: "7", after: "14" },
    { label: "Coût / lead", before: "28€", after: "17€" },
  ],
  tracking: ["clic-to-call", "form_submit", "UTM campagnes", "dashboard leads/coûts"],
  note: "Données indicatives et anonymisées. Les résultats varient selon offre, concurrence, zone et budget.",
};

// ✅ FAQ spécifique zone (circulation, saisonnalité, déplacements)
const faq = [
  {
    q: `Quelles communes prioriser en ${zoneName} ?`,
    a: "On démarre par les communes “cœur” (demande + proximité) puis on étend aux villes proches. Priorisation = intention + concurrence + rentabilité.",
  },
  {
    q: "Y a-t-il une saisonnalité (vacances, week-ends) ?",
    a: "Souvent oui (pensions, pet-sitting, toilettage). On anticipe via pages dédiées + Ads saisonnières + planning de contenus GBP.",
  },
  {
    q: "Déplacements : comment éviter les demandes hors zone ?",
    a: "En affichant un rayon réaliste, une liste de communes couvertes, et une question de qualification (ville) en formulaire + exclusions Ads.",
  },
  {
    q: "Circulation / temps de trajet : est-ce un frein ?",
    a: "Oui si la zone est trop large. On conseille une zone maîtrisée (rayon) et des pages localisées cohérentes avec vos déplacements réels.",
  },
  {
    q: "Comment prouver que les leads viennent bien du SEO/Maps/Ads ?",
    a: "Tracking : clic-to-call, formulaires tagués, UTM, événements analytics + dashboard mensuel.",
  },
];

const jsonLd = [
  {
    "@context": "https://schema.org",
    "@type": "CollectionPage",
    name: title,
    url: canonical,
    description,
    isPartOf: { "@type": "WebSite", name: "Horizon Conversion Animaux", url: baseUrl },
  },
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    itemListElement: breadcrumbs.map((b, i) => ({
      "@type": "ListItem",
      position: i + 1,
      name: b.name,
      item: b.item,
    })),
  },
  {
    "@context": "https://schema.org",
    "@type": "ItemList",
    name: `Villes couvertes – ${zoneName}`,
    itemListElement: townsAll.slice(0, 30).map((t, i) => ({
      "@type": "ListItem",
      position: i + 1,
      name: t,
      url: `${baseUrl}/zones/${slugifyCity(t)}/`,
    })),
  },
  {
    "@context": "https://schema.org",
    "@type": "ItemList",
    name: `Pages métier × ville – ${zoneName}`,
    itemListElement: moneyMetierPages.slice(0, 30).map((p, i) => ({
      "@type": "ListItem",
      position: i + 1,
      name: `${p.jobName} à ${p.town}`,
      url: `${baseUrl}${p.href}`,
    })),
  },
  {
    "@context": "https://schema.org",
    "@type": "ItemList",
    name: `Pages service × ville – ${zoneName}`,
    itemListElement: moneyServicePages.slice(0, 30).map((p, i) => ({
      "@type": "ListItem",
      position: i + 1,
      name: `${p.serviceName} à ${p.town}`,
      url: `${baseUrl}${p.href}`,
    })),
  },
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    mainEntity: faq.map((f) => ({
      "@type": "Question",
      name: f.q,
      acceptedAnswer: { "@type": "Answer", text: f.a },
    })),
  },
];
---

<LayoutSEO
  title={title}
  description={description}
  baseUrl={baseUrl}
  canonical={canonical}
  ogType="website"
  ogImage={`${baseUrl}/og/zones-sud-oise-60.jpg`}
  ogImageAlt="Sud Oise (60) – Guide SEO local pros animaux"
  breadcrumbs={breadcrumbs}
  jsonLd={jsonLd}
>
<style>
  :global(body){margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial;color:#0f172a;background:#fff}
  .wrap{max-width:1040px;margin:0 auto;padding:28px 16px 72px}
  .breadcrumbs{font-size:14px;color:#475569;margin:4px 0 18px}
  .breadcrumbs a{color:inherit;text-decoration:none}
  header.hero{border:1px solid #e2e8f0;border-radius:18px;background:linear-gradient(180deg,#f8fafc,#fff);padding:22px;display:grid;gap:10px}
  h1{margin:0;font-size:34px;line-height:1.1;letter-spacing:-0.02em}
  .sub{margin:0;color:#334155;max-width:95ch;line-height:1.6}
  .grid{margin-top:18px;display:grid;grid-template-columns:1.1fr .9fr;gap:18px;align-items:start}
  @media (max-width:920px){.grid{grid-template-columns:1fr}}
  .card{border:1px solid #e2e8f0;border-radius:18px;padding:18px;background:#fff;box-shadow:0 6px 20px rgba(15,23,42,.06)}
  h2{margin:0 0 10px;font-size:18px}
  p{margin:0;color:#334155;line-height:1.6}
  ul{margin:10px 0 0;padding-left:18px;color:#334155;line-height:1.55}
  .pills{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
  .pill{display:inline-block;font-size:12px;padding:6px 10px;border-radius:999px;border:1px solid #e2e8f0;background:#fff;color:#334155;text-decoration:none}
  .pill:hover{border-color:#cbd5e1;background:#f8fafc}
  .note{margin-top:12px;border:1px dashed #cbd5e1;border-radius:16px;padding:14px;background:#f8fafc;color:#334155;line-height:1.6}
  .ctaRow{margin-top:16px;display:grid;grid-template-columns:1fr 1fr;gap:12px}
  @media (max-width:720px){.ctaRow{grid-template-columns:1fr}}
  .btn{display:inline-flex;align-items:center;justify-content:center;padding:12px 14px;border-radius:14px;border:1px solid #0f172a;background:#0f172a;color:#fff;font-weight:900;text-decoration:none}
  .btn.secondary{background:#fff;color:#0f172a}
  .meta{color:#475569;font-size:14px;line-height:1.6;margin-top:10px}
  .link{color:#0f172a;text-decoration:none;border-bottom:1px solid rgba(15,23,42,.18)}
  .link:hover{border-bottom-color:rgba(15,23,42,.45)}
  .miniGrid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px;margin-top:10px}
  @media (max-width:720px){.miniGrid{grid-template-columns:1fr}}
  .kpi{border:1px solid #e2e8f0;border-radius:16px;background:#f8fafc;padding:12px}
  .kpi strong{display:block;font-size:13px}
  .kpi span{display:block;font-size:12px;color:#64748b;margin-top:2px}
  .faq{margin-top:16px}
  .faq details{border:1px solid #e2e8f0;border-radius:16px;padding:12px 14px;background:#fff;margin-bottom:10px}
  .faq summary{cursor:pointer;font-weight:900}
  .faq p{margin:10px 0 0}
</style>

<div class="wrap">
  <nav class="breadcrumbs" aria-label="Fil d’Ariane">
    <a href="/">Accueil</a> <span aria-hidden="true">›</span>{" "}
    <a href="/zones/">Zones</a> <span aria-hidden="true">›</span>{" "}
    <span>Sud Oise (60)</span>
  </nav>

  <header class="hero">
    <h1>Sud Oise (60) : guide SEO local & acquisition</h1>
    <p class="sub">
      Communes prioritaires, déplacements, saisonnalité, et pages qui rankent vraiment :
      <strong> métier×ville</strong> + <strong>service×ville</strong>, avec preuves locales et tracking.
    </p>
  </header>

  <section class="grid">
    <div class="card">
      <h2>Communes prioritaires</h2>
      <div class="pills">
        {coreTowns.map((t) => <a class="pill" href={`/zones/${slugifyCity(t)}/`}>{t}</a>)}
      </div>

      <div class="note">
        <strong>Principe :</strong> 1 page = 1 intention locale (métier + ville + besoin) + FAQ + schémas + CTA,
        puis on relie via les hubs “zone” et “ville”.
      </div>

      <h2 style="margin-top:16px;">Preuves locales (anonymisées)</h2>
      <p>{localProof.context}</p>

      <div class="miniGrid" aria-label="KPIs avant après">
        {localProof.beforeAfter.map((k) => (
          <div class="kpi">
            <strong>{k.label}</strong>
            <span>Avant : {k.before} → Après : {k.after}</span>
          </div>
        ))}
      </div>

      <div class="note" style="margin-top:10px;">
        <strong>Tracking en place :</strong>{" "}
        {localProof.tracking.map((t, i) => (
          <span>{t}{i < localProof.tracking.length - 1 ? " • " : ""}</span>
        ))}
        <div class="meta" style="margin-top:8px;">{localProof.note}</div>
      </div>

      <div class="ctaRow">
        <a class="btn" href="/contact/">Demander un diagnostic</a>
        <a class="btn secondary" href="tel:+33660921008">Appeler : 06 60 92 10 08</a>
      </div>

      <div class="faq" id="faq">
        <h2 style="margin:0 0 10px;">FAQ (Sud Oise)</h2>
        {faq.map((f) => (
          <details>
            <summary>{f.q}</summary>
            <p>{f.a}</p>
          </details>
        ))}
      </div>
    </div>

    <aside class="card">
      <h2>Pages métier × ville</h2>
      <ul>
        {moneyMetierPages.slice(0, 14).map((p) => (
          <li><a class="link" href={p.href}>{p.jobName} à {p.town}</a></li>
        ))}
      </ul>

      <h2 style="margin-top:16px;">Pages service × ville</h2>
      <ul>
        {moneyServicePages.slice(0, 12).map((p) => (
          <li><a class="link" href={p.href}>{p.serviceName} à {p.town}</a></li>
        ))}
      </ul>

      <h2 style="margin-top:16px;">Villes proches (extension)</h2>
      <div class="pills">
        {otherTowns.map((t) => <a class="pill" href={t.href}>{t.name}</a>)}
      </div>

      <h2 style="margin-top:16px;">Raccourcis</h2>
      <div class="pills">
        <a class="pill" href="/metiers/">Métiers</a>
        <a class="pill" href="/prestations/">Prestations</a>
        <a class="pill" href="/tarifs/">Tarifs</a>
      </div>
    </aside>
  </section>
</div>
</LayoutSEO>