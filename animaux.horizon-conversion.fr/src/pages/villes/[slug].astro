---
import LayoutSeo from "../../layouts/LayoutSEO.astro";
import JsonLd from "../../components/JsonLd.astro";
import FAQ from "../../components/FAQ.astro";
import InternalLinks from "../../components/InternalLinks.astro";
import CTA from "../../components/CTA.astro";
import AroundCities from "../../components/AroundCities.astro";
import { getCollection } from "astro:content";

export async function getStaticPaths() {
  const entries = await getCollection("villes");
  return entries.map((entry) => ({ params: { slug: entry.id }, props: { entry } }));
}

const { entry } = Astro.props;
const d = entry.data;
---

<LayoutSeo title={d.title} description={d.metaDescription} h1={d.h1}>
  <JsonLd type="ville" data={d} />

  <section>
    <h2>Visibilité locale</h2>
    <p>
      L’objectif : capter la demande locale sur Google/Maps et transformer cette visibilité en appels et formulaires,
      avec un suivi précis des conversions.
    </p>
  </section>

  <section style="margin-top: 18px;">
    <h2>Ce qu’on active à {d.h1.replace("Acquisition locale à ", "").replace(" pour pros animaliers", "")}</h2>
    <ul>
      <li>SEO local : structure + contenus + signaux Google/Maps</li>
      <li>Google Ads : capter la demande immédiate</li>
      <li>Tracking : piloter sur la qualité des demandes</li>
    </ul>
  </section>

  <AroundCities citySlug={d.slug} />

  <CTA />

  <FAQ items={d.faqs ?? []} />
  <InternalLinks data={d} />
</LayoutSeo>
