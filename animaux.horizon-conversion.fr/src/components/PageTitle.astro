---
// src/components/PageTitle.astro
const {
  h1,
  lead = "",
  bgImage = "/assets/images/gallery/0.jpg",
  showBadges = true,
  showCtas = true,
  breadcrumbs = null,

  proofs = [
    { title: "Process + livrables", subtitle: "pas de blabla" },
    { title: "Tracking inclus", subtitle: "appels / formulaires" },
    { title: "Zones : 60/95", subtitle: "Creil, Chantilly, Sarcellesâ€¦" }
  ]
} = Astro.props;

const hasCrumbs = Array.isArray(breadcrumbs) && breadcrumbs.length > 0;
const safeProofs = Array.isArray(proofs) ? proofs.slice(0, 3) : [];
---

<section class="page-title page-title-parallax parallax scroll-detect dark include-header">
  <img src={bgImage} class="parallax-bg" alt="" />
  <div class="container">
    <div class="page-title-row pt-5 pb-3">

      <div class="page-title-content">
        <h1
            style="font-size: 40px; line-height: 1.2; font-weight: 700; text-shadow: 1px 1px 1px rgba(0,0,0,0.5);"
            set:html={h1}
        />

        {lead ? (
            <span class="fw-light d-none d-md-block" style="font-size: 16px; opacity: .85; max-width: 720px;">
            {lead}
          </span>
        ) : null}

        {showCtas ? (
            <div class="d-flex flex-wrap align-items-center gap-3 mt-4">
              <a href="/contact/" class="button button-large button-rounded ms-0" data-cta="1">
                Mini-audit (15 min)
              </a>
              <a
                  href="tel:+33660921008"
                  class="button button-large button-rounded button-border button-white button-light ms-0"
                  data-cta="1"
              >
                Appeler : 06 60 92 10 08
              </a>
            </div>
        ) : null}

        {showBadges && safeProofs.length ? (
            <div class="row mt-4" style="max-width: 820px;">
              {safeProofs.map((p) => (
                  <div class="col-md-4">
                    <div style="background: rgba(0,0,0,.35); padding: 12px 14px; border-radius: 12px;">
                      <strong>{p.title}</strong>
                      {p.subtitle ? <><br/><small style="opacity:.85;">{p.subtitle}</small></> : null}
                    </div>
                  </div>
              ))}
            </div>
        ) : null}
      </div>

      {hasCrumbs ? (
          <nav aria-label="breadcrumb" class="d-none d-lg-block">
            <ol class="breadcrumb" style="--bs-breadcrumb-divider: '&#62;';">
              <li class="breadcrumb-item">
                <a href="/"><i class="uil uil-home"></i></a>
              </li>
              {breadcrumbs.map((c, idx) => {
                const isLast = idx === breadcrumbs.length - 1;
                return isLast ? (
                    <li class="breadcrumb-item active" aria-current="page">{c.label}</li>
                ) : (
                    <li class="breadcrumb-item"><a href={c.href}>{c.label}</a></li>
                );
              })}
            </ol>
          </nav>
      ) : null}

    </div>
  </div>
</section>
