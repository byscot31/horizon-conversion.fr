---
// src/pages/zones/[zone]/[ville].astro
import BaseLayout from "../../../layouts/BaseLayout.astro";

export async function getStaticPaths() {
  // Version squelette : quelques exemples. Tu pourras générer depuis villes.json plus tard.
  const paths = [
    { zone: "sud-oise-60", ville: "senlis" },
    { zone: "sud-oise-60", ville: "chantilly" },
    { zone: "sud-oise-60", ville: "creil" },
    { zone: "sud-oise-60", ville: "nogent-sur-oise" },
    { zone: "sud-oise-60", ville: "meru" },
    { zone: "sud-oise-60", ville: "gouvieux" },
    { zone: "sud-oise-60", ville: "lamorlaye" },
    { zone: "sud-oise-60", ville: "saint-leu-d-esserent" },
    { zone: "sud-oise-60", ville: "chambly" },

    // Exemples côté 95 (à compléter)
    { zone: "nord-val-doise-95", ville: "chambly" },
    { zone: "nord-val-doise-95", ville: "lamorlaye" },
    { zone: "nord-val-doise-95", ville: "saint-leu-d-esserent" },
  ];

  return paths.map((p) => ({ params: p }));
}

const { zone, ville } = Astro.params;

const zoneLabel =
  zone === "sud-oise-60" ? "Sud Oise (60)" :
  zone === "nord-val-doise-95" ? "Nord Val-d’Oise (95)" :
  "Zone";

const villeLabel = (ville || "")
  .split("-")
  .map((w) => w.charAt(0).toUpperCase() + w.slice(1))
  .join(" ");

const title = `Zone ${zoneLabel} – ${villeLabel} | Plan local (déménageurs)`;
const description =
  `Plan local à ${villeLabel} (${zoneLabel}) : visibilité, demandes de devis, pages utiles et suivi.`;
---

<BaseLayout title={title} description={description}>

	<section class="page-title bg-color dark py-6">
		<div class="container">
			<div class="page-title-row">
				<div class="page-title-content">
					<h1>{villeLabel} – {zoneLabel}</h1>
					<span>Plan local : visibilité → demandes → amélioration</span>
				</div>

				<nav aria-label="breadcrumb">
					<ol class="breadcrumb">
						<li class="breadcrumb-item"><a href="/">Accueil</a></li>
						<li class="breadcrumb-item"><a href="/zones/">Zones</a></li>
						<li class="breadcrumb-item"><a href={`/zones/${zone}/`}>{zoneLabel}</a></li>
						<li class="breadcrumb-item active" aria-current="page">{villeLabel}</li>
					</ol>
				</nav>

			</div>
		</div>
	</section>

	<section id="content">
		<div class="content-wrap pb-0">

			<!-- Titre local + contexte -->
			<div class="container mt-5 mb-5">
				<div class="row justify-content-center">
					<div class="col-lg-10">
						<div class="heading-block border-bottom-0 text-center mb-3">
							<h2 class="text-transform-none fw-semibold ls-0 mb-3">
								Obtenir plus de demandes à {villeLabel}, sans attirer les mauvaises demandes
							</h2>
							<p class="text-black-50 mb-0">
								On part des attentes locales (zone, timing, accès, types de déménagement) et on construit une page utile qui mène à l’appel ou au devis.
							</p>
						</div>

						<div class="text-center">
							<a href="/contact" class="button button-rounded button-large">Demander un plan d’action</a>
						</div>
					</div>
				</div>
			</div>

			<!-- 3 leviers (Visibilité Google / Publicité / Conversion) -->
			<div class="section bg-transparent mt-0">
				<div class="container">
					<div class="row justify-content-center mb-4">
						<div class="col-lg-9 text-center">
							<div class="heading-block border-bottom-0">
								<h2 class="text-transform-none fw-semibold ls-0 mb-3">Les 3 leviers</h2>
								<span class="text-black-50">On peut activer un levier, ou les combiner selon votre situation.</span>
							</div>
						</div>
					</div>

					<div class="row col-mb-30">
						<div class="col-md-4">
							<div class="card shadow-sm border-0 rounded h-100">
								<div class="card-body p-4">
									<h4 class="fw-semibold mb-2"><i class="bi-geo-alt me-2"></i>Visibilité Google</h4>
									<p class="text-muted mb-0">Être trouvé sur {villeLabel} avec des infos crédibles et rassurantes.</p>
									<div class="mt-3">
										<a href="/visibilite-google/" class="text-decoration-underline">Voir le service</a>
									</div>
								</div>
							</div>
						</div>

						<div class="col-md-4">
							<div class="card shadow-sm border-0 rounded h-100">
								<div class="card-body p-4">
									<h4 class="fw-semibold mb-2"><i class="bi-bullseye me-2"></i>Publicité</h4>
									<p class="text-muted mb-0">Générer des demandes sur 1–3 villes prioritaires, avec suivi et cadrage.</p>
									<div class="mt-3">
										<a href="/publicite-locale/" class="text-decoration-underline">Voir le service</a>
									</div>
								</div>
							</div>
						</div>

						<div class="col-md-4">
							<div class="card shadow-sm border-0 rounded h-100">
								<div class="card-body p-4">
									<h4 class="fw-semibold mb-2"><i class="bi-file-earmark-text me-2"></i>Conversion</h4>
									<p class="text-muted mb-0">Clarifier le message, ajouter preuves/FAQ, et faciliter l’appel ou le devis.</p>
									<div class="mt-3">
										<a href="/pages-locales/" class="text-decoration-underline">Voir le service</a>
									</div>
								</div>
							</div>
						</div>
					</div>

				</div>
			</div>

			<!-- Étapes + livrables -->
			<div class="container mb-6">
				<div class="row justify-content-center">
					<div class="col-lg-10">
						<div class="heading-block border-bottom-0 text-center mb-4">
							<h2 class="text-transform-none fw-semibold ls-0 mb-3">Étapes + livrables</h2>
							<p class="text-black-50 mb-0">Ce que vous obtenez concrètement sur {villeLabel}.</p>
						</div>

						<div class="row col-mb-30">
							<div class="col-md-6">
								<div class="card shadow-sm border-0 rounded h-100">
									<div class="card-body p-4">
										<h4 class="fw-semibold mb-2">1) Diagnostic local</h4>
										<p class="text-muted mb-0">Vérification des pages existantes, messages, preuves, et parcours contact.</p>
										<div class="text-muted small mt-2">Livrable : liste de priorités.</div>
									</div>
								</div>
							</div>

							<div class="col-md-6">
								<div class="card shadow-sm border-0 rounded h-100">
									<div class="card-body p-4">
										<h4 class="fw-semibold mb-2">2) Page {villeLabel} utile</h4>
										<p class="text-muted mb-0">Contexte local + problèmes + plan + preuves + FAQ + CTA unique.</p>
										<div class="text-muted small mt-2">Livrable : page prête à publier.</div>
									</div>
								</div>
							</div>

							<div class="col-md-6">
								<div class="card shadow-sm border-0 rounded h-100">
									<div class="card-body p-4">
										<h4 class="fw-semibold mb-2">3) Suivi des demandes</h4>
										<p class="text-muted mb-0">Appels + devis + qualité (zone/type/timing) pour savoir quoi améliorer.</p>
										<div class="text-muted small mt-2">Livrable : suivi simple.</div>
									</div>
								</div>
							</div>

							<div class="col-md-6">
								<div class="card shadow-sm border-0 rounded h-100">
									<div class="card-body p-4">
										<h4 class="fw-semibold mb-2">4) Améliorations</h4>
										<p class="text-muted mb-0">On garde ce qui marche et on corrige ce qui bloque la prise de contact.</p>
										<div class="text-muted small mt-2">Livrable : plan d’améliorations.</div>
									</div>
								</div>
							</div>
						</div>

						<div class="text-center mt-4">
							<a href="/methode" class="button button-rounded">Voir la méthode</a>
						</div>

					</div>
				</div>
			</div>

			<!-- Preuves -->
			<div class="section bg-transparent mt-0">
				<div class="container">
					<div class="row justify-content-center">
						<div class="col-lg-10">
							<div class="heading-block border-bottom-0 text-center mb-4">
								<h2 class="text-transform-none fw-semibold ls-0 mb-3">Preuves & réassurance</h2>
								<p class="text-black-50 mb-0">On suit et on améliore : appels, devis, qualité. Pas de promesse garantie.</p>
							</div>

							<div class="row col-mb-30">
								<div class="col-md-4">
									<div class="card shadow-sm border-0 rounded h-100">
										<div class="card-body p-4">
											<h4 class="fw-semibold mb-2"><i class="bi-telephone me-2"></i>Appels</h4>
											<p class="text-muted mb-0">D’où viennent les appels ? Quelles pages les déclenchent ?</p>
										</div>
									</div>
								</div>
								<div class="col-md-4">
									<div class="card shadow-sm border-0 rounded h-100">
										<div class="card-body p-4">
											<h4 class="fw-semibold mb-2"><i class="bi-ui-checks me-2"></i>Demandes de devis</h4>
											<p class="text-muted mb-0">Combien de formulaires, et avec quelles infos utiles ?</p>
										</div>
									</div>
								</div>
								<div class="col-md-4">
									<div class="card shadow-sm border-0 rounded h-100">
										<div class="card-body p-4">
											<h4 class="fw-semibold mb-2"><i class="bi-award me-2"></i>Qualité</h4>
											<p class="text-muted mb-0">Zone, timing, type : des demandes traitables.</p>
										</div>
									</div>
								</div>
							</div>

							<div class="text-center mt-4">
								<a href="/preuves" class="button button-rounded">Voir des exemples</a>
							</div>

						</div>
					</div>
				</div>
			</div>

			<!-- FAQ -->
			<div class="container mb-5">
				<div class="section-clients mx-auto" style="max-width: 820px">
					<div class="text-center mb-4">
						<span class="badge rounded-pill lightthemecolor color text-uppercase ls-1 fw-medium py-2 px-3">FAQ locale</span>
					</div>

					<div class="toggle" data-state="open">
						<div class="toggle-header flex-row-reverse">
							<div class="toggle-icon">
								<i class="toggle-closed bi-plus-circle"></i>
								<i class="toggle-open bi-x-circle"></i>
							</div>
							<div class="toggle-title fw-medium">Est-ce que ça marche si je ne couvre pas toute la zone ?</div>
						</div>
						<div class="toggle-content text-black-50">
							Oui. On précise votre zone réellement couverte pour éviter les demandes inutiles et gagner du temps.
						</div>
					</div>

					<div class="toggle">
						<div class="toggle-header flex-row-reverse">
							<div class="toggle-icon">
								<i class="toggle-closed bi-plus-circle"></i>
								<i class="toggle-open bi-x-circle"></i>
							</div>
							<div class="toggle-title fw-medium">Combien de villes travailler au départ ?</div>
						</div>
						<div class="toggle-content text-black-50">
							Souvent 1 à 3 villes (celles où vous voulez vraiment des demandes). Ensuite, on étend.
						</div>
					</div>

					<div class="toggle border-0">
						<div class="toggle-header flex-row-reverse">
							<div class="toggle-icon">
								<i class="toggle-closed bi-plus-circle"></i>
								<i class="toggle-open bi-x-circle"></i>
							</div>
							<div class="toggle-title fw-medium">Quel est le prochain pas ?</div>
						</div>
						<div class="toggle-content text-black-50">
							Envoyez vos 3 villes prioritaires + votre objectif : on vous propose un plan clair.
						</div>
					</div>

					<div class="text-center mt-4">
						<a href="/contact" class="button button-rounded">Demander un plan d’action</a>
					</div>
				</div>
			</div>

			<!-- Maillage fort -->
			<div class="container mb-6">
				<div class="row justify-content-center">
					<div class="col-lg-10">
						<div class="card shadow-sm border-0 rounded">
							<div class="card-body p-4">
								<h3 class="fw-semibold mb-3">Aller plus loin</h3>
								<div class="row">
									<div class="col-md-4 mb-2">
										<a href={`/zones/${zone}/`} class="text-decoration-underline">Retour à la zone {zoneLabel}</a>
									</div>
									<div class="col-md-4 mb-2">
										<a href="/pages-locales/" class="text-decoration-underline">Service : Pages locales</a>
									</div>
									<div class="col-md-4 mb-2">
										<a href="/tarifs" class="text-decoration-underline">Voir les tarifs</a>
									</div>
									<div class="col-md-4 mb-2">
										<a href="/visibilite-google/" class="text-decoration-underline">Service : Visibilité Google</a>
									</div>
									<div class="col-md-4 mb-2">
										<a href="/publicite-locale/" class="text-decoration-underline">Service : Publicité locale</a>
									</div>
									<div class="col-md-4 mb-2">
										<a href="/ressources/" class="text-decoration-underline">Ressources</a>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- CTA final -->
			<div class="section dark pt-0 mb-0 bg-color" style="background: url('/_assets_/images/bg-2.png') no-repeat center bottom / 100%; overflow: visible">
				<svg viewBox="0 0 1960 206.8" class="bg-white">
					<path class="svg-themecolor" style="opacity:0.2;" d="M0,142.8A2337.49,2337.49,0,0,1,297.5,56.3C569.33-3.53,783.89.22,849.5,2.3c215.78,6.86,382.12,45.39,503.25,73.45,158.87,36.8,283.09,79.13,458.75,54.55A816.49,816.49,0,0,0,1983,86.8v110H0Z"></path>
					<path class="svg-themecolor" d="M.5,152.8s498-177,849-150,1031,238,1134,94v110H.5Z"></path>
				</svg>
				<div class="container">
					<div class="row align-items-center justify-content-center text-center my-4">
						<div class="col-sm-9">
							<div class="heading-block border-bottom-0 mb-4">
								<h2 class="fw-semibold ls-0 text-transform-none mb-3" style="font-size: 44px; line-height: 1.3">
									Plan local à {villeLabel} : clair, utile, et mesurable
								</h2>
								<p class="text-white-50 mb-0">Dites vos villes prioritaires et votre objectif (appels / devis).</p>
							</div>
							<a href="/contact" class="button button-white button-light button-rounded fw-medium m-0">Demander un plan d’action</a>
						</div>
					</div>
				</div>
			</div>

		</div>
	</section>

</BaseLayout>